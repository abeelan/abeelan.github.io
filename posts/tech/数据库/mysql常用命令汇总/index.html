<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>MySQL - 常用命令汇总 | ABEE</title><meta name=keywords content="mysql"><meta name=description content="简介 **数据（Data）**是描述事物的符号记录，是指利用物理符号记录下来的、可以鉴别的信息。 **数据库（Database, DB）**是指长期储存在计算机中的有组织、可共享的数据集合。 **数据库管理系统（DBMS）**是专门用于建立和管理数据库的一套软件，介于应用程序和操作系统之"><meta name=author content="ABEE"><link rel=canonical href=https://abeelan.github.io/posts/tech/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB/><link crossorigin=anonymous href=/assets/css/stylesheet.fbe782675a7c7c9c739a48204d6d2a4da78a00e11ba93326b39891e3501b1740.css integrity="sha256-++eCZ1p8fJxzmkggTW0qTaeKAOEbqTMms5iR41AbF0A=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://abeelan.github.io/img/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://abeelan.github.io/img/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://abeelan.github.io/img/favicon.ico><link rel=apple-touch-icon href=https://abeelan.github.io/img/favicon.ico><link rel=mask-icon href=https://abeelan.github.io/img/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script src=https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js></script><script>var _hmt=_hmt||[];(function(){var a=document.createElement("script"),b;a.src="",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script><meta property="og:title" content="MySQL - 常用命令汇总"><meta property="og:description" content="简介 **数据（Data）**是描述事物的符号记录，是指利用物理符号记录下来的、可以鉴别的信息。 **数据库（Database, DB）**是指长期储存在计算机中的有组织、可共享的数据集合。 **数据库管理系统（DBMS）**是专门用于建立和管理数据库的一套软件，介于应用程序和操作系统之"><meta property="og:type" content="article"><meta property="og:url" content="https://abeelan.github.io/posts/tech/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-10-08T16:17:45+08:00"><meta property="article:modified_time" content="2022-10-08T16:17:45+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="MySQL - 常用命令汇总"><meta name=twitter:description content="简介 **数据（Data）**是描述事物的符号记录，是指利用物理符号记录下来的、可以鉴别的信息。 **数据库（Database, DB）**是指长期储存在计算机中的有组织、可共享的数据集合。 **数据库管理系统（DBMS）**是专门用于建立和管理数据库的一套软件，介于应用程序和操作系统之"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"📚 分类","item":"https://abeelan.github.io/posts/"},{"@type":"ListItem","position":2,"name":"👨🏻‍💻 技术","item":"https://abeelan.github.io/posts/tech/"},{"@type":"ListItem","position":3,"name":"MySQL - 常用命令汇总","item":"https://abeelan.github.io/posts/tech/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"MySQL - 常用命令汇总","name":"MySQL - 常用命令汇总","description":"简介 **数据（Data）**是描述事物的符号记录，是指利用物理符号记录下来的、可以鉴别的信息。 **数据库（Database, DB）**是指长期储存在计算机中的有组织、可共享的数据集合。 **数据库管理系统（DBMS）**是专门用于建立和管理数据库的一套软件，介于应用程序和操作系统之","keywords":["mysql"],"articleBody":"简介 **数据（Data）**是描述事物的符号记录，是指利用物理符号记录下来的、可以鉴别的信息。\n**数据库（Database, DB）**是指长期储存在计算机中的有组织、可共享的数据集合。\n**数据库管理系统（DBMS）**是专门用于建立和管理数据库的一套软件，介于应用程序和操作系统之间。\n数据库分类  关系型数据库（RDB - Relationship Database）  Mysql、Oracle、Postgres、SQLLite、SQLServer 使用场景：数据处理较复杂、数据量不是特别大、对安全性要求比较高、数据格式单一   非关系型数据库（NoSQL - Not only sql）  MongoDB、Redis、HBase、Neo4j（图分析数据库） 数据模型比较简单、需要灵活性更强的 IT 系统、对数据库性能要求较高、不需要高度的数据一致性    MySQL 安装与配置 登录数据库服务器\n登录方式\n 远程连接（ssh） 本地服务器（本地搭建）  我这里通过本地 docker 的方式，启动数据库服务，登录命令：\n$ docker run --name=mysql -it -p 3306:3306 -e MYSQL_ROOT_PASSWORD=root -e MYSQL_ROOT_HOST=% -d mysql $ docker exec -it mysql /bin/bash 查看数据库版本信息\n$ mysql --version $ mysql -V 登录数据库\n$ mysql -h localhost -u root -p # -h：指连接的主机名 # -u：用户名 # -p：密码 root # 然后输入密码，进入数据库 # 修改密码 $ alter user 'root'@'localhost' identified by '新密码'; # 退出数据库 $ exit 查看数据库版本\nmysql SELECT VERSION(); 正常会出现数据库的版本号，环境准备完成！\n数据库客户端工具   workBench；下载地址：https://dev.mysql.com/downloads/workbench/\n  Navicat（付费）\n  表  包含数据库中所有数据的数据库对象\n 表名：每个表的唯一标识\n模式：schema，关于数据库和表的布局及特性的信息\n列：表中每列称为一个字段\n行：表中的一条记录\nSQL SQL 是什么？\n 结构化查询语言，简称 SQL 一种特殊目的的编程语言 一种数据库查询和程序设计语言 用于存取数据以及查询、更新和管理关系数据库系统  语法规范 通用语法\n 命令中间用逗号分隔，可以单行或者多行书写，以分号结尾 可以使用空格和缩进来增加语句的可读性 命令不区分大小写，建议 关键字大写，数据库名、表名、列名小写 注释方式：--、#（仅 MySQL） 单行注释；/* */ 多行注释  分类\n 数据定义语言（DDL）：用来定义数据库对象，比如数据库、表、列等 数据操作语言（DML）：用来对数据库中表的记录进行更新 数据查询语言（DQL）：用来查询数据库中表的记录 数据控制语言（DCL）：用来定义数据库的访问权限和安全级别及创建用户  DDL 数据库操作 创建 # 创建数据库语法 # {} 必选项；｜ 或；[] 可选项 CREATE {DATABASE|SCHEMA} [IF NOT EXISTS] 数据库名 CHARACTER SET [=] 字符集; 创建数据库注意事项：\n 不能与其他数据库重名 名称可以由任意字母、阿拉伯数字、下划线和 $ 组成，但不能使用单独的数字 名称最长可为 64 个字符，别名最长为 256 个字符 不能使用 MySQL 关键字作为数据库名 建议采用小写来定义数据库名  -- 创建数据库 CREATE DATABASE test_db; -- 指定字符集为 utf-8 CREATE DATABASE test_db2 CHARACTER SET utf8; -- 创建数据库前判断是否存在同名数据库 CREATE DATABASE IF NOT EXISTS test_db3 CHARACTER SET utf8; 查看 -- 查看所有数据库 SHOW DATABASES; -- 指定为当前数据库 USE 数据库名; -- 查看数据库定义信息 SHOW CREATE DATABASE 数据库名; 修改 -- 修改数据库相关参数，如果不指定数据库名则表示修改当前的数据库 ALTER {DATABASE} [数据库名] CHARACTER SET [=] 字符集; -- 实例 CREATE DATABASE db1 CHARACTER SET gbk; ALTER DATABASE db1 CHARACTER SET utf8; 删除 -- 删除数据库; 删除后数据结构和数据都没了 DROP DATABASE [IF EXISTS] 数据库名; DDL 表操作 MySQL 的数据类型\n 数字类型（大概下面三种，长短整型、双精度浮点型等不详细列了）  INT 整型 FLOAT 浮点型 BOOLEAN 布尔值   字符串类型  CHAR 固定长度（1-255） VARCHAR 长度可变，不超过 255 个字符 TEXT 最大长度为 64K 的变长文本   日期和时间类型  DATE 日期 TIME 时间 DATETIME 日期和时间 TIMESTAMP 时间戳 YEAR 年份    创建 -- 创建表；列名在表中唯一 CREATE TABLE 数据表名 ( 列名 数据类型 [NOT NULL | NULL] [DEFAULT 默认值] [AUTO_INCREMENT] [PRIMARY KEY] [注释], ... ); -- AUTO_INCREMENT 是否自动编号 -- PRIMARY KEY 是否为主键  -- 复制表(结构) CREATE TABLE 数据表名 {LIKE 源数据表名 | (LIKE 源数据表名)}; 实例\n-- 切换到数据库 USE db1; -- 创建学员表 CREATE TABLE student ( id INT, name VARCHAR(20) ); -- 复制学员表 CREATE TABLE student_cpy LIKE student; 查看 -- 查看表名 SHOW TABLES; -- 查看表结构 DESCRIBE 数据表名; -- 简写 DESC 数据表名; DESC 数据表名 列名; 修改 -- 添加新列 ALTER TABLE 表名 ADD 列名 列属性; -- 修改列定义 ALTER TABLE 表名 MODIFY 列名 列属性; -- 修改列名 ALTER TABLE 表名 CHANGE 旧列名 新列名 类型; 实例\n-- 切换数据库 USE db1; -- 添加列 ALTER TABLE student ADD email VARCHAR(50) NOT NULL; -- 修改列定义 ALTER TABLE student ADD score VARCHAR(10) NOT NULL; ALTER TABLE student MODIFY score INT; -- 修改列名 ALTER TABLE student CHANGE COLUMN name stu_name VARCHAR(30) DEFAULT NULL; -- 查看表结构，验证修改生效 DESC student; 删除列 ALTER TABLE 表名 DROP 列名; ALTER TABLE student DROP score; 修改表名 -- 方式一 ALTER TABLE 旧表名 RENAME AS 新表名; -- 方式二 RENAME TABLE 旧表名 TO 新表名; 删除表 DROP TABLE [IF EXISTS] 数据表名; DML 表数据操作 插入 -- 插入数据 列名和值一一对应 INSERT INTO 数据表名 (列名1, 列名2, ...) VALUES (值1, 值2, ...); 注意事项：\n 值与字段必须对应，个数相同且数据类型相同 值的数据大小，必须在字段指定的长度范围内 VARCHAR、CHAR、DATE 类型的值，必须使用单引号括起来 如果要插入空值，可以忽略不写，或者插入 NULL 如果插入指定字段的值，必须写上列名  修改 UPDATE 数据表名 SET 列名1=值1 [, 列名2=值2, ...] [WHERE 条件表达式]; 删除 -- 通过 delete 语句; 未指定条件则删除表中全部数据 DELETE FROM 表名 [WHERE 条件表达式]; -- 通过 truncate table 语句删除表中全部数据 TRUNCATE TABLE 表名; 如果需要删除整张表，推荐使用 TRUNCATE 语句：\n DELETE：每条数据都会执行一次删除，效率低 TRUNCATE：删除整张表，然后重新创建空表，效率高  实例\n-- 切换数据库 USE db1; -- 创建 user 表 CREATE TABLE user( id INT, name VARCHAR(20), age INT, sex CHAR(1), address VARCHAR(40) ); /* 插入 */ -- 插入一条完整的数据 INSERT INTO user (id, name, age, sex, address) VALUES (1, '张三', 20, '男', '北京'); -- 插入一条完整的数据，可以不用写列名，值按照表的列的顺序插入 INSERT INTO user VALUES (2, '李四', 19, '女', '上海'); -- 插入表中某几列的值，没有值的列自动为 NULL INSERT INTO user (id, name, address) VALUES (3, '王五', '深圳'); -- 插入多条数据 INSERT INTO user (id, name, address) VALUES (4, '赵六', '天津'), (5, '周七', '杭州'); /* 修改 */ -- 不带条件修改，将所有的性别改为女 UPDATE user SET sex='女'; -- 带条件修改，id=3 的用户：性别修改为男 UPDATE user SET sex='男' WHERE id=3; -- 修改多个列的数据，id=2 的用户：年龄修改为 30，地址修改为 北京 UPDATE user SET age=30, adress='北京' WHERE id=2; /* 删除 */ -- 删除 id=1 的用户数据 DELETE FROM user WHERE id=1; -- 删除表中所有的数据 DELETE FROM user; TRUNCATE TABLE user; DQL 表查询操作 在进行查询前，先进行数据准备工作，使用开源的数据示例。\n https://github.com/datacharmer/test_db\n该数据库包含大约 300,000 条员工记录和 280 万条工资条目。导出数据为 167 MB，对于测试来说足够。\n # 这里通过 docker 启动 mysql:5.7 的容器进行测试 # 1、下载数据文件 $ cd workspace/github $ git clone git@github.com:datacharmer/test_db.git # 2、启动 mysql 容器，挂载数据文件到容器内 $ docker pull mysql:5.7 $ docker run --name=mysql -it -p 3306:3306 -e MYSQL_ROOT_PASSWORD=root -e MYSQL_ROOT_HOST=% -v /workspace/github/test_db:/opt -d mysql:5.7 # 3、导入数据库 $ docker exec -it mysql /bin/bash $ mysql -h 127.0.0.1 -u root -p # 等待导入完成，大概 1 分钟+ 单表查询  从一张表中查询所需要的数据。\n -- 查询全部数据 SELECT * FROM 表名; -- 实例：查询部门表中的信息 SELECT * FROM departments; -- 查询多个字段（列）, 多个列中间用逗号分隔 SELECT 列名 FROM 表名; -- 实例：查询部门名称 SELECT dept_name FROM departments; /* 起别名 */ -- 为表起别名 SELECT 列名 FROM 表名 表别名; -- 为字段起别名 SELECT 列名 AS 别名 FROM 表名; -- 实例：查询员工信息，并将列名改为中文，表名改为 emp SELECT emp_no AS '编号', first_name AS '名', last_name AS '姓', gender AS '性别', hire_date AS '入职时间' FROM employees emp; -- 去重 SELECT DISTINCT 列名 FROM 表名; -- 实例：去掉重复职级信息 SELECT DISTINCT title FROM titles; -- 查询结果参与运算 SELECT (列名 运算表达式) FROM 表名; -- 实例：所有员工的工资 +1000 进行显示 SELECT emp_no, salary + 1000 FROM salaries; 条件查询 -- 条件查询 SELECT 列名 FROM 表名 WHERE 条件表达式; 比较运算法  大于（）、小于（=、 等于（=）如果是字符，则比较 ASCII 码 不等于（、!=） 范围限定（BETWEEN…AND…） 子集限定（IN） 模糊查询（LIKE ‘%or%'） 为空（IS NULL）  -- 实例：比较大小，查询出生日期晚于 1965-01-01 的员工编号、姓名和生日 SELECT emp_no, first_name, birth_date FROM employees WHERE birth_date  '1965-01-01'; -- 使用 BETWEEN 进行模糊查询 WHERE 列名 [NOT] BETWEEN 起始表达式 AND 结束表达式 -- 实例：查询年薪介于 70000 到 70003 之间的员工编号和年薪 SELECT emp_no, salary FROM salaries WHERE salary BETWEEN 70000 AND 70003; -- 使用 IN 进行模糊查询, 常量列表使用逗号隔开 WHERE 列名 IN (常量列表) -- 实例：查询入职日期为 1995-01-27 和 1995-03-20 的员工信息 SELECT * FROM employees WHERE hire_date IN ('1995-01-27', '1995-03-20'); -- 判断是否为空 WHERE 列名 IS [NOT] NULL -- 实例：查询性别为空的员工信息 SELECT * FROM employees WHERE gender IS NULL; -- 没有为空的数据 SELECT * FROM employees WHERE gender IS NOT NULL; -- 全部员工数据 逻辑运算法  AND 或 \u0026\u0026：多个条件同时成立 OR 或 ||：多个条件任一成立 NOT：不成立  -- 查询名字为 Lillian 并且姓氏为 Haddadi 的员工信息 SELECT * FROM employees WHERE first_name = 'Lillian' AND last_name = 'Haddadi'; -- 查询名字为 Lillian 或者姓氏为 Terkki 的员工信息 SELECT * FROM employees WHERE first_name = 'Lillian' OR last_name = 'Terkki'; -- 查询名字为 Lillian 并且性别不是女的员工信息 SELECT * FROM employees WHERE first_name = 'Lillian' AND NOT gender = 'F'; 通配符  %：匹配任意多个字符 _：匹配一个字符  -- 查询名字中包含 fai 的员工信息 SELECT * FROM employees WHERE first_name LIKE '%fai%'; -- 查询名字中 fa 开头的且长度为 3 位的员工信息 SELECT * FROM employees WHERE first_name LIKE 'fa_'; 排序 排序语法\n ASC：升序（默认） DESC：降序  -- 对查询结果进行排序 SELECT 列名 FROM 表名 [WHERE 条件表达式] ORDER BY 列名1 [ASC | DESC], 列名2 [ASC | DESC]; 单列排序 -- 使用 salary 字段，对 salaraies 表数据进行 升序/降序 排序 SELECT * FROM salaries ORDER BY salary; SELECT * FROM salaries ORDER BY salary DESC; -- 查询员工的编号和入职日期，按照员工入职日期从晚到早排序 SELECT emp_no, hire_date FROM employees ORDER BY hire_date DESC; 组合排序 同时对多个字段进行排序，如果第一个字段相同，就按照第二个字段进行排序。\n-- 在入职时间排序的基础上，再使用 emp_no 进行降序排序 SELECT emp_no, hire_date FROM employees ORDER BY hire_date DESC, emp_no DESC; 聚合函数  COUNT()：统计指定列不为 NULL 的记录行数 MAX()：计算指定列的最大值 MIN()：计算指定列的最小值 SUM()：计算指定列的数值和 AVG()：计算指定列的平均值  -- 聚合查询语法 SELECT 聚合函数(列名) FROM 表名; -- 实例 -- 查询职级名称为 Senior Engineer 的员工数量 SELECT COUNT(title) FROM titles WHERE title = 'Senior Engineer'; SELECT COUNT(*) FROM titles WHERE title = 'Senior Engineer'; -- 查询员工编号为 10002 的员工的最高年薪 SELECT MAX(salary) FROM salaries WHERE emp_no = 10002; -- 查询最低年薪 SELECT MIN(salary) FROM salaries WHERE emp_no = 10002; -- 查询薪资总和 SELECT SUM(salary) FROM salaries WHERE emp_no = 10002; -- 计算平均薪资 SELECT AVG(salary) FROM salaries WHERE emp_no = 10002; 分组 分组查询语法\n 分组列：按哪些列进行分组 HAVING：对分组结果再次过滤  -- 分组查询语法 SELECT (分组列 ｜ 聚合函数) FROM 表名 GROUP BY 分组列 [HAVING 条件]; 实例\n-- 查询每个员工的薪资和 SELECT emp_no, SUM(salary) FROM salaries GROUP BY emp_no; -- 查询员工编号小于 10010 且薪资和小于 400000 的员工的薪资和 SELECT emp_no, SUM(salary) FROM salaries WHERE emp_no  10010 GROUP BY emp_no HAVING SUM(salary)  400000; 子句区别\n WHERE 子句：从数据源中去掉不符合搜索条件的数据 GROUP BY 子句：搜集数据行到各个组中，统计函数为各个组计算统计值 HAVING 子句：去掉不符合其组搜索条件的各行数据行  LIMIT 关键字 限制查询结果的数量\n-- 限制查询结果行数 SELECT 列名1, 列名2 FROM 表名 LIMIT [开始的行数], 查询记录的条数; -- 使用 OFFSET 关键自指定开始的行数 SELECT 列名1, 列名2 FROM 表名 LIMIT 查询记录的条数 OFFSET 开始的行数; -- 开始的行数：从 0 开始，默认为 0 -- 查询记录的条数：返回的行数 实例\n-- 展示前 10 条员工信息 SELECT * FROM employees LIMIT 10; SELECT * FROM employees LIMIT 0, 10; SELECT * FROM employees LIMIT 10 OFFSET 0; -- 显示年薪从高到低排序，第 15 位到第 20 员工的编号和年薪 SELECT emp_no, salary FROM salaries ORDER BY salary DESC LIMIT 14, 6; SELECT emp_no, salary FROM salaries ORDER BY salary DESC LIMIT 6 OFFSET 14; 单表查询总结 SELECT DISTINCT 列名 FROM 表名 WHERE 查询条件表达式 GROUP BY 分组的列名 HAVING 分组后的查询条件表达式 ORDER BY 排序的列名 [ASC | DESC] LIMIT 开始的行数, 查询记录的条数; SQL 约束 对表中的数据进行进一步的限制，保证数据的正确性、有效性、完整性。违反约束的不正确数据无法插入到表中。常见的约束：\n 主键：PRIMARY KEY 非空：NOT NULL 唯一：UNIQUE 默认：DEFAULT 外键：FOREIGN KEY  主键约束 主键：一列（或一组列），其值能够唯一标识表中的每一行\n特点：不可重复，唯一，非空\n语法：列名 字段类型 PRIMARY KEY\n创建带有主键的表 -- 创建一个带有主键的表 CREATE TABLE emp1( -- 设为主键后自动非空 \teid INT PRIMARY KEY, ename VARCHAR(20), gender CHAR(1) ); -- 向已有的表中添加主键 CREATE TABLE emp2( eid INT, ename VARCHAR(20), gender CHAR(1) ); ALTER TABLE emp2 ADD PRIMARY KEY(eid); -- 向 emp1 中添加数据，验证主键非空和不能重复的特性 INSERT INTO emp1 VALUES(1, 'zhangsan', 'M'); -- 插入空值插入报错，主键不能为空 -- INSERT INTO emp1 VALUES(NULL, 'lisi', 'W'); -- 插入重复数据报错，主键不能重复 -- INSERT INTO emp1 VALUES(1, 'lisi', 'F'); 主键自增 由于主键的特性，每次人为按顺序添加难免出错，可以使用自增的属性。\n-- 创建主键自增 -- AUTO_INCREMENT: 表示自动增长（必须整数类型的字段），默认从 1 开始 CREATE TABLE emp3( eid INT PRIMARY KEY AUTO_INCREMENT, ename VARCHAR(20), gender CHAR(1) ); INSERT INTO emp3 VALUEs(1, 'zhangsan', 'M'); -- 只需要添加名字和性别即可，id 会自增 INSERT INTO emp3(ename, gender) VALUES('lisi', 'M'), ('wangwu', 'F'); -- 修改主键自增起始值为 100 CREATE TABLE emp4( eid INT PRIMARY KEY AUTO_INCREMENT, ename VARCHAR(20), gender CHAR(1) )AUTO_INCREMENT=100; # DELETE FROM emp4; 删除表后，添加数据会继续之前的编号往上自增 # TRUNCATE TABLE emp4; 先删除整表后重新创建，自增会从起始值开始 删除主键约束 -- 删除表中的主键 ALTER TABLE 表名 DROP PRIMARY KEY; -- 实例：删除表2 的主键 ALTER TABLE emp2 DROP PRIMARY KEY; 选择主键原则  针对业务设计主键，建议每张表都设计一个主键 主键可以没有业务意义，只需保证不重复  非空约束 特点：某一列不允许为空\n语法：列名 字段类型 NOT NULL\n-- 创建非空约束的表 CREATE TABLE emp5 ( eid INT PRIMARY KEY AUTO_INCREMENT, ename VARCHAR(20) NOT NULL, gender CHAR(1) ); INSERT INTO emp5(ename, gender) VALUES('zhangsan', 'F'); -- 报错：Field 'ename' doesn't have a default value, Time: 0.001000s INSERT INTO emp5(gender) VALUES('F'); 唯一约束  表中的某一列的值不能重复 对 NULL 不做唯一的判断 语法：列名 字段类型 UNIQUE  -- 创建带有唯一约束的表 CREATE TABLE emp6 ( eid INT PRIMARY KEY AUTO_INCREMENT, ename VARCHAR(20) UNIQUE, gender CHAR(1) ); INSERT INTO emp6(ename, gender) VALUES('zhangsan', 'F'); -- 报错：Duplicate entry 'zhangsan' for key 'ename', Time: 0.004000s INSERT INTO emp6(ename, gender) VALUES('zhangsan', 'F'); 主键约束与唯一约束的区别：\n 主键约束：唯一且不能为空 唯一约束：唯一但可以为空 一个表中只能有一个主键，但是可以有多个唯一约束  默认值约束 默认值约束：用来指定某列的默认值\n语法：列名 字段类型 DEFAULT 默认值\n-- 创建带有默认值的表 CREATE TABLE emp7 ( eid INT PRIMARY KEY AUTO_INCREMENT, ename VARCHAR(20), gender CHAR(1) DEFAULT 'F' ); -- 使用默认值，可以通过 DEFAULT 指定，也可以不写 INSERT INTO emp7(ename, gender) VALUES('zhangsan', DEFAULT); INSERT INTO emp7(ename) VALUES('lisi'); -- 不使用默认值 INSERT INTO emp7(ename, gender) VALUES('wangwu', 'M'); 外键约束 课程名称： SQL 约束 - 外键约束\nTODO 不理解，等查阅完基础资料再来。\n创建表的同时创建外键约束 -- 创建主表 CREATE TABLE tester ( id INT PRIMARY KEY AUTO_INCREMENT, name VARCHAR(20), team_id INT, -- 添加外键及外键约束 \tCONSTRAINT tester_team FOREIGN KEY(team_id) REFERENCES tester(id) ); 修改外键约束\n删除外键约束\n级联删除\n多表  在数据库设计中使用多张表格来实现数据存储的要求，在实际的项目中，数据量大且复杂，需要分库分表。\n 分表：按照一定的规则，对原有的数据库和表进行拆分，表与表之间可以通过外键建立连接。\n实例：创建一张员工信息表，包含字段：\n eid：员工 ID（自增主键） ename：员工姓名 age：年龄 gender：性别 dept_name：部门名称 dept_id：部门 ID dept_manager：部门主管 dept_location：所在地点  -- 创建单表 CREATE TABLE emp( eid INT PRIMARY KEY AUTO_INCREMENT, ename VARCHAR(20), age INT, gender VARCHAR(5), dept_name VARCHAR(10), dept_id INT, dept_manager VARCHAR(10), dept_location VARCHAR(10) ); INSERT INTO emp VALUES(1, 'zhangsan', 20, '', 'qa', 1, 'qa_leader', 'beijing'); 当插入数据时，所有的数据都需要添加部门名称、部门经理等重复性信息，所以需要使用多表设计模式。\n 将数据拆分为员工信息表table_emp和部门信息表table_dept 两个表之间通过部门 IDdept_id字段连接  CREATE TABLE table_emp( id INT PRIMARY KEY AUTO_INCREMENT, name VARCHAR(20), age INT, gender VARCHAR(5), dept_id INT ); CREATE TABLE table_dept( id INT PRIMARY KEY AUTO_INCREMENT, name VARCHAR(10), manager VARCHAR(10), location VARCHAR(10)\t); INSERT INTO table_emp VALUES(1, 'zhangsan', 18, 'M', 1); INSERT INTO table_emp VALUES(2, 'lisi', 19, 'F', 2); INSERT INTO table_dept VALUES(1, 'qa', 'leader', 'beijing'); INSERT INTO table_dept VALUES(2, 'rd', 'rd_leader', 'beijing'); 多表的优点：\n 简化数据 提高复用性 方便权限控制 提高系统的稳定性和负载能力  多表关系简介 一对多 定义：主表的一条记录可以对应从表的多条记录。在一对多关系中，多的表定为从表，设置外键指向主表。\n比如：部门表、员工表，一个部门可以对应多个员工。建表时，员工表就应作为从表，设置外键指向部门表的主键。\n多对多 定义：主表的多条记录可以对应从表的多条记录。需要创建第三张表作为中间表，中间表需要包含两种表的主键。\n比如：商品信息表、客户表、订单表。\n一对一 定义：从表的一条记录对应主表的一条记录，这种对应关系的数据，通常放在单表里。\n比如：员工信息表与身份证、联系方式。\n多表查询 笛卡尔积查询 通过查询多张表格获取数据，至少涉及两张表\n-- 创建部门表，插入三条数据 CREATE TABLE dept( id INT PRIMARY KEY AUTO_INCREMENT, dept_name VARCHAR(20), dept_manager VARCHAR(20), dept_location VARCHAR(20) ); INSERT INTO dept VALUES (1, '研发部', '研发小张', '北京'); INSERT INTO dept VALUES (2, '运营部', '运营小李', '上海'); INSERT INTO dept VALUES (3, '销售部', '销售小王', '深圳'); -- 创建员工信息表，添加外键约束，允许级联删除，并对三个部门插入对应的员工信息 CREATE TABLE worker( id INT PRIMARY KEY AUTO_INCREMENT, name VARCHAR(20), gender VARCHAR(10), dept_id INT, salary INT, -- 添加外键约束，级联删除 \tCONSTRAINT FK FOREIGN KEY(dept_id) REFERENCES dept(id) ON DELETE CASCADE ); INSERT INTO worker VALUES (1, '虞姬', '女', 2, 10000); INSERT INTO worker VALUES (2, '项羽', '男', 1, 18000); INSERT INTO worker VALUES (3, '后羿', '男', 3, 28000); -- 查询表 SELECT * FROM dept; SELECT * FROM worker; -- 笛卡尔积查询，会出现很多无效数据 SELECT * FROM dept, worker; -- 正确查询 SELECT * FROM dept, worker WHERE dept.id=worker.dept_id; -- 查询出运营部的部门信息及该部门下的员工信息 SELECT * FROM dept, worker WHERE dept.id=worker.dept_id AND dept.id=2; 内连接查询 内连接（INNER JOIN）：使用比较运算符进行表间某（些）列数据的比较操作，并列出这些表中与连接条件相匹配的数据行，组成新的记录。匹配上显示，匹配不上不显示。按语法结构分为：隐式内连接和显式内连接。\n  隐式内连接：使用 where 条件过滤无用数据，没有出现 inner join 关键字\n  显式内连接：添加 inner join 关键字\n  -- 隐式内连接 SELECT [字段名称] FROM [表名] WHERE [条件]; -- 显示内连接 SELECT [字段名称] FROM [主表名] INNER JOIN [从表名] ON [条件]; SELECT worker.id, name, dept_location FROM worker, dept WHERE worker.dept_id=dept.id AND dept_name=\"运营部\"; SELECT worker.id, name, dept_location FROM dept INNER JOIN worker ON dept.id=worker.dept_id AND dept_name=\"运营部\"; 外连接查询 外连接：查询多个表中相关联的行，有时候需要包含没有关联的行中数据，即返回查询结果集合中不仅包含符合连接条件的行，还包括左表（左连接）、右表（右连接）中的所有数据行。\n 左外连接（LEFT OUTER JOIN），OUTER 可以省略，以左表为基准匹配右表的数据，确保左表数据都展示，右表中没有的项，显示为空。 右外连接（RIGHT OUTER JOIN），OUTER 可以省略，以右表为基准匹配左表的数据，确保右表数据都展示，左表中没有的项，显示为空。  -- 左连接 SELECT [字段名称] FROM [左表] LEFT JOIN [右表] ON [条件]; -- 右连接 SELECT [字段名称] FROM [左表] RIGHT JOIN [右表] ON [条件]; 子查询 子查询指一个查询语句嵌套在另一个查询语句内部，在 SELECT 子句中先计算子查询，子查询的结果作为外层另一个查询的过滤条件，查询可以基于一个表或者多个表。\n子查询作为过滤条件时需要用小括号包裹。\n常见的三类子查询如下：\nfrom 型\n将子查询的结果作为父查询的表来使用。子查询是一张多行多列的表，将子查询作为父查询的表来嵌套查询，子查询必须用小括号包裹且有别名。\n-- 计算出各部门男性员工的人数 -- 最终查询字段部门名称、男性员工人数 -- 子查询：查询公司所有性别为男的员工信息 SELECT * FROM worker WHERE gender=\"男\"; SELECT dept_name AS '部门名称', COUNT(dept_id) AS '部门人数' FROM (SELECT * FROM worker WHERE gender=\"男\") AS male_worker INNER JOIN dept ON male_worker.dept_id=dept.id GROUP BY dept_name; in/not in 型：子查询的结果是单列多行，作为 where 的过滤条件\n-- 带 IN 关键字的子查询 -- 查询出北京地区所有的员工信息 SELECT id FROM dept WHERE dept_location=\"北京\"; SELECT * FROM worker WHERE dept_id IN (SELECT id FROM dept WHERE dept_location=\"北京\"); SELECT * FROM worker WHERE dept_id NOT IN (SELECT id FROM dept WHERE dept_location=\"北京\"); where 型：查询结果作为过滤条件出现在比较运算符的一端，常用于子查询结果为单个的情况。\n-- 查询出薪资大于公司平均薪资的员工 ID、姓名、薪资 SELECT AVG(salary) FROM worker; SELECT id, name, salary FROM worker WHERE salary  (SELECT AVG(salary) FROM worker); with…as…型：如果一整句查询语句中，某个子查询的结果会被多个父查询引用，通常建议将公用的子查询用简写表示出来。\n-- WITH [表名] AS (SELECT ...) -- 查询出部门平均薪资大于公司平均薪资的部门名称、部门主管、所在地，及其平均薪资 WITH dept_avg AS (SELECT dept_id, AVG(salary) AS avg_salary FROM worker GROUP BY dept_id) SELECT dept_name, dept_manager, dept_location, avg_salary FROM dept INNER JOIN dept_avg ON id=dept_id AND avg_salary  (SELECT AVG(avg_salary) FROM dept_avg); 视图 视图是一种虚拟的表，它并不会在存储空间复制一份数据，而是对原有数据的一种引用。可以将视图理解为一种存储起来的 sql 语句。\n 视图可以简化多表查询 视图可以用于控制用户权限  CREATE VIEW [视图名称] AS SELECT ... ","wordCount":"8072","inLanguage":"en","datePublished":"2022-10-08T16:17:45+08:00","dateModified":"2022-10-08T16:17:45+08:00","author":[{"@type":"Person","name":"ABEE"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://abeelan.github.io/posts/tech/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB/"},"publisher":{"@type":"Organization","name":"ABEE","logo":{"@type":"ImageObject","url":"https://abeelan.github.io/img/favicon.ico"}}}</script></head><body id=top><script>(function(){let a,b=new RegExp("(^| )change-themes=([^;]*)(;|$)");(a=document.cookie.match(b))||((new Date).getHours()>=19||(new Date).getHours()<6?(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark')):(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')))})(),localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://abeelan.github.io/ accesskey=h title="ABEE (Alt + H)"><img src=https://abeelan.github.io/img/avatar.gif alt=logo aria-label=logo height=35>ABEE</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://abeelan.github.io/ title="🏠 主页"><span>🏠 主页</span></a></li><li><a href=https://abeelan.github.io/tags title="🧩 标签"><span>🧩 标签</span></a></li><li><a href=https://abeelan.github.io/archives/ title="⏱️ 时间轴"><span>⏱️ 时间轴</span></a></li><li><a href=https://abeelan.github.io/about title="🙋🏻‍♂️ 关于"><span>🙋🏻‍♂️ 关于</span></a></li><li><a href=https://abeelan.github.io/search title="🔍 搜索 (Alt + /)" accesskey=/><span>🔍 搜索</span></a></li></ul></nav></header><main class="main page"><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}body{counter-reset:h2}h2{counter-reset:h3}h3{counter-reset:h4}h4{counter-reset:h5}article[autonumbering] h2:before{counter-increment:h2;content:counter(h2)". "}article[autonumbering] h3:before{counter-increment:h3;content:counter(h2)"." counter(h3)" "}article[autonumbering] h4:before{counter-increment:h4;content:counter(h2)"." counter(h3)"." counter(h4)" "}article[autonumbering] .toc ul{counter-reset:item}article[autonumbering] .toc li a:before{content:counters(item,".")" ";counter-increment:item}</style><article class=post autonumbering><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://abeelan.github.io/>🏠 主页</a>&nbsp;»&nbsp;<a href=https://abeelan.github.io/posts/>📚 分类</a>&nbsp;»&nbsp;<a href=https://abeelan.github.io/posts/tech/>👨🏻‍💻 技术</a></div><h1 class=post-title>MySQL - 常用命令汇总</h1><div class=post-meta><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}.parent-post-meta{display:flex;flex-wrap:wrap;opacity:.8}</style><span class=parent-post-meta><span id=post_meta_style_1><span class="fa fa-calendar-check-o"></span><span>2022-10-08
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_3><span class="fa fa-file-word-o"></span><span>8072字
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_4><span class="fa fa-clock-o"></span><span>17分钟
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_5><span class="fa fa-user-o"></span><span>ABEE
&nbsp;&nbsp;</span></span>
<span id=post_meta_style_6><span class="fa fa-tags" style=opacity:.8></span><span><span class=post-tags-meta><a href=https://abeelan.github.io/tags/mysql/ style=color:var(--secondary)!important>mysql</a></span></span></span></span>
<span style=opacity:.8><span id=post_meta_style_7>&nbsp;&nbsp;
<span class="fa fa-eye"></span><span><span id=busuanzi_container_page_pv><span id=busuanzi_value_page_pv></span></span>&nbsp;&nbsp;</span></span>
<span id=post_meta_style_8><span class="fa fa-commenting-o"></span><span><script src=https://cdn.staticfile.org/twikoo/1.5.8/twikoo.all.min.js></script><script>let url=document.documentURI,dnsUrl="https://abeelan.github.io/",urlSplit=url.split(dnsUrl),finalUrl=urlSplit[1];finalUrl[0]!=='/'&&(finalUrl='/'+finalUrl),twikoo.getCommentsCount({envId:null,region:"ap-beijing",urls:[finalUrl],includeReply:!1}).then(function(a){let b=a[0].count;const c=document.getElementById("comment_count");c.innerText=b}).catch(function(a){console.error(a)})</script><span id=comment_count></span></span></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e7%ae%80%e4%bb%8b aria-label=简介>简介</a></li><li><a href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e5%88%86%e7%b1%bb aria-label=数据库分类>数据库分类</a></li><li><a href=#mysql-%e5%ae%89%e8%a3%85%e4%b8%8e%e9%85%8d%e7%bd%ae aria-label="MySQL 安装与配置">MySQL 安装与配置</a></li><li><a href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e5%ae%a2%e6%88%b7%e7%ab%af%e5%b7%a5%e5%85%b7 aria-label=数据库客户端工具>数据库客户端工具</a></li><li><a href=#%e8%a1%a8 aria-label=表>表</a></li><li><a href=#sql aria-label=SQL>SQL</a><ul><li><a href=#%e8%af%ad%e6%b3%95%e8%a7%84%e8%8c%83 aria-label=语法规范>语法规范</a></li><li><a href=#ddl-%e6%95%b0%e6%8d%ae%e5%ba%93%e6%93%8d%e4%bd%9c aria-label="DDL 数据库操作">DDL 数据库操作</a><ul><li><a href=#%e5%88%9b%e5%bb%ba aria-label=创建>创建</a></li><li><a href=#%e6%9f%a5%e7%9c%8b aria-label=查看>查看</a></li><li><a href=#%e4%bf%ae%e6%94%b9 aria-label=修改>修改</a></li><li><a href=#%e5%88%a0%e9%99%a4 aria-label=删除>删除</a></li></ul></li><li><a href=#ddl-%e8%a1%a8%e6%93%8d%e4%bd%9c aria-label="DDL 表操作">DDL 表操作</a><ul><li><a href=#%e5%88%9b%e5%bb%ba-1 aria-label=创建>创建</a></li><li><a href=#%e6%9f%a5%e7%9c%8b-1 aria-label=查看>查看</a></li><li><a href=#%e4%bf%ae%e6%94%b9-1 aria-label=修改>修改</a></li><li><a href=#%e5%88%a0%e9%99%a4%e5%88%97 aria-label=删除列>删除列</a></li><li><a href=#%e4%bf%ae%e6%94%b9%e8%a1%a8%e5%90%8d aria-label=修改表名>修改表名</a></li><li><a href=#%e5%88%a0%e9%99%a4%e8%a1%a8 aria-label=删除表>删除表</a></li></ul></li><li><a href=#dml-%e8%a1%a8%e6%95%b0%e6%8d%ae%e6%93%8d%e4%bd%9c aria-label="DML 表数据操作">DML 表数据操作</a><ul><li><a href=#%e6%8f%92%e5%85%a5 aria-label=插入>插入</a></li><li><a href=#%e4%bf%ae%e6%94%b9-2 aria-label=修改>修改</a></li><li><a href=#%e5%88%a0%e9%99%a4-1 aria-label=删除>删除</a></li></ul></li><li><a href=#dql-%e8%a1%a8%e6%9f%a5%e8%af%a2%e6%93%8d%e4%bd%9c aria-label="DQL 表查询操作">DQL 表查询操作</a><ul><li><a href=#%e5%8d%95%e8%a1%a8%e6%9f%a5%e8%af%a2 aria-label=单表查询>单表查询</a></li><li><a href=#%e6%9d%a1%e4%bb%b6%e6%9f%a5%e8%af%a2 aria-label=条件查询>条件查询</a><ul><li><a href=#%e6%af%94%e8%be%83%e8%bf%90%e7%ae%97%e6%b3%95 aria-label=比较运算法>比较运算法</a></li><li><a href=#%e9%80%bb%e8%be%91%e8%bf%90%e7%ae%97%e6%b3%95 aria-label=逻辑运算法>逻辑运算法</a></li><li><a href=#%e9%80%9a%e9%85%8d%e7%ac%a6 aria-label=通配符>通配符</a></li></ul></li><li><a href=#%e6%8e%92%e5%ba%8f aria-label=排序>排序</a><ul><li><a href=#%e5%8d%95%e5%88%97%e6%8e%92%e5%ba%8f aria-label=单列排序>单列排序</a></li><li><a href=#%e7%bb%84%e5%90%88%e6%8e%92%e5%ba%8f aria-label=组合排序>组合排序</a></li></ul></li><li><a href=#%e8%81%9a%e5%90%88%e5%87%bd%e6%95%b0 aria-label=聚合函数>聚合函数</a></li><li><a href=#%e5%88%86%e7%bb%84 aria-label=分组>分组</a></li><li><a href=#limit-%e5%85%b3%e9%94%ae%e5%ad%97 aria-label="LIMIT 关键字">LIMIT 关键字</a></li><li><a href=#%e5%8d%95%e8%a1%a8%e6%9f%a5%e8%af%a2%e6%80%bb%e7%bb%93 aria-label=单表查询总结>单表查询总结</a></li></ul></li></ul></li><li><a href=#sql-%e7%ba%a6%e6%9d%9f aria-label="SQL 约束">SQL 约束</a><ul><li><a href=#%e4%b8%bb%e9%94%ae%e7%ba%a6%e6%9d%9f aria-label=主键约束>主键约束</a><ul><ul><li><a href=#%e5%88%9b%e5%bb%ba%e5%b8%a6%e6%9c%89%e4%b8%bb%e9%94%ae%e7%9a%84%e8%a1%a8 aria-label=创建带有主键的表>创建带有主键的表</a></li><li><a href=#%e4%b8%bb%e9%94%ae%e8%87%aa%e5%a2%9e aria-label=主键自增>主键自增</a></li><li><a href=#%e5%88%a0%e9%99%a4%e4%b8%bb%e9%94%ae%e7%ba%a6%e6%9d%9f aria-label=删除主键约束>删除主键约束</a></li><li><a href=#%e9%80%89%e6%8b%a9%e4%b8%bb%e9%94%ae%e5%8e%9f%e5%88%99 aria-label=选择主键原则>选择主键原则</a></li></ul></ul></li><li><a href=#%e9%9d%9e%e7%a9%ba%e7%ba%a6%e6%9d%9f aria-label=非空约束>非空约束</a></li><li><a href=#%e5%94%af%e4%b8%80%e7%ba%a6%e6%9d%9f aria-label=唯一约束>唯一约束</a></li><li><a href=#%e9%bb%98%e8%ae%a4%e5%80%bc%e7%ba%a6%e6%9d%9f aria-label=默认值约束>默认值约束</a></li><li><a href=#%e5%a4%96%e9%94%ae%e7%ba%a6%e6%9d%9f aria-label=外键约束>外键约束</a><ul><ul><li><a href=#%e5%88%9b%e5%bb%ba%e8%a1%a8%e7%9a%84%e5%90%8c%e6%97%b6%e5%88%9b%e5%bb%ba%e5%a4%96%e9%94%ae%e7%ba%a6%e6%9d%9f aria-label=创建表的同时创建外键约束>创建表的同时创建外键约束</a></li></ul></ul></li></ul></li><li><a href=#%e5%a4%9a%e8%a1%a8 aria-label=多表>多表</a><ul><li><a href=#%e5%a4%9a%e8%a1%a8%e5%85%b3%e7%b3%bb%e7%ae%80%e4%bb%8b aria-label=多表关系简介>多表关系简介</a><ul><ul><li><a href=#%e4%b8%80%e5%af%b9%e5%a4%9a aria-label=一对多>一对多</a></li><li><a href=#%e5%a4%9a%e5%af%b9%e5%a4%9a aria-label=多对多>多对多</a></li><li><a href=#%e4%b8%80%e5%af%b9%e4%b8%80 aria-label=一对一>一对一</a></li></ul></ul></li><li><a href=#%e5%a4%9a%e8%a1%a8%e6%9f%a5%e8%af%a2 aria-label=多表查询>多表查询</a><ul><ul><li><a href=#%e7%ac%9b%e5%8d%a1%e5%b0%94%e7%a7%af%e6%9f%a5%e8%af%a2 aria-label=笛卡尔积查询>笛卡尔积查询</a></li><li><a href=#%e5%86%85%e8%bf%9e%e6%8e%a5%e6%9f%a5%e8%af%a2 aria-label=内连接查询>内连接查询</a></li><li><a href=#%e5%a4%96%e8%bf%9e%e6%8e%a5%e6%9f%a5%e8%af%a2 aria-label=外连接查询>外连接查询</a></li><li><a href=#%e5%ad%90%e6%9f%a5%e8%af%a2 aria-label=子查询>子查询</a></li></ul><li><a href=#%e8%a7%86%e5%9b%be aria-label=视图>视图</a></li></ul></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener('DOMContentLoaded',function(b){checkTocPosition(),elements=document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]'),activeElement=elements[0];const a=encodeURI(activeElement.getAttribute('id')).toLowerCase();document.querySelector(`.inner ul li a[href="#${a}"]`).classList.add('active')},!1),window.addEventListener('resize',function(a){checkTocPosition()},!1),window.addEventListener('scroll',()=>{activeElement=Array.from(elements).find(a=>{if(getOffsetTop(a)-window.pageYOffset>0&&getOffsetTop(a)-window.pageYOffset<window.innerHeight/2)return a})||activeElement,elements.forEach(a=>{const b=encodeURI(a.getAttribute('id')).toLowerCase();a===activeElement?document.querySelector(`.inner ul li a[href="#${b}"]`).classList.add('active'):document.querySelector(`.inner ul li a[href="#${b}"]`).classList.remove('active')})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue('--gap'),10);function checkTocPosition(){const a=document.body.scrollWidth;a-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(a){if(!a.getClientRects().length)return 0;let b=a.getBoundingClientRect(),c=a.ownerDocument.defaultView;return b.top+c.pageYOffset}</script><div class=post-content><h2 id=简介>简介<a hidden class=anchor aria-hidden=true href=#简介>#</a></h2><p>**数据（Data）**是描述事物的符号记录，是指利用物理符号记录下来的、可以鉴别的信息。</p><p>**数据库（Database, DB）**是指长期储存在计算机中的有组织、可共享的数据集合。</p><p>**数据库管理系统（DBMS）**是专门用于建立和管理数据库的一套软件，介于应用程序和操作系统之间。</p><h2 id=数据库分类>数据库分类<a hidden class=anchor aria-hidden=true href=#数据库分类>#</a></h2><ul><li>关系型数据库（RDB - Relationship Database）<ul><li>Mysql、Oracle、Postgres、SQLLite、SQLServer</li><li>使用场景：数据处理较复杂、数据量不是特别大、对安全性要求比较高、数据格式单一</li></ul></li><li>非关系型数据库（NoSQL - Not only sql）<ul><li>MongoDB、Redis、HBase、Neo4j（图分析数据库）</li><li>数据模型比较简单、需要灵活性更强的 IT 系统、对数据库性能要求较高、不需要高度的数据一致性</li></ul></li></ul><h2 id=mysql-安装与配置>MySQL 安装与配置<a hidden class=anchor aria-hidden=true href=#mysql-安装与配置>#</a></h2><p>登录数据库服务器</p><p><strong>登录方式</strong></p><ul><li>远程连接（ssh）</li><li>本地服务器（本地搭建）</li></ul><p>我这里通过本地 docker 的方式，启动数据库服务，登录命令：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ docker run --name<span style=color:#f92672>=</span>mysql -it -p 3306:3306 -e MYSQL_ROOT_PASSWORD<span style=color:#f92672>=</span>root -e MYSQL_ROOT_HOST<span style=color:#f92672>=</span>% -d mysql
$ docker exec -it mysql /bin/bash
</code></pre></div><p><strong>查看数据库版本信息</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ mysql --version
$ mysql -V
</code></pre></div><p><strong>登录数据库</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ mysql -h localhost -u root -p
<span style=color:#75715e># -h：指连接的主机名</span>
<span style=color:#75715e># -u：用户名</span>
<span style=color:#75715e># -p：密码 root</span>

<span style=color:#75715e># 然后输入密码，进入数据库</span>
<span style=color:#75715e># 修改密码</span>
$ alter user <span style=color:#e6db74>&#39;root&#39;</span>@<span style=color:#e6db74>&#39;localhost&#39;</span> identified by <span style=color:#e6db74>&#39;新密码&#39;</span>;

<span style=color:#75715e># 退出数据库</span>
$ exit
</code></pre></div><p><strong>查看数据库版本</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>VERSION</span>();
</code></pre></div><p>正常会出现数据库的版本号，环境准备完成！</p><h2 id=数据库客户端工具>数据库客户端工具<a hidden class=anchor aria-hidden=true href=#数据库客户端工具>#</a></h2><ul><li><p>workBench；下载地址：https://dev.mysql.com/downloads/workbench/</p></li><li><p>Navicat（付费）</p></li></ul><h2 id=表>表<a hidden class=anchor aria-hidden=true href=#表>#</a></h2><blockquote><p>包含数据库中所有数据的数据库对象</p></blockquote><p>表名：每个表的唯一标识</p><p>模式：schema，关于数据库和表的布局及特性的信息</p><p>列：表中每列称为一个字段</p><p>行：表中的一条记录</p><h2 id=sql>SQL<a hidden class=anchor aria-hidden=true href=#sql>#</a></h2><p><strong>SQL 是什么？</strong></p><ul><li>结构化查询语言，简称 SQL</li><li>一种特殊目的的编程语言</li><li>一种数据库查询和程序设计语言</li><li>用于存取数据以及查询、更新和管理关系数据库系统</li></ul><h3 id=语法规范>语法规范<a hidden class=anchor aria-hidden=true href=#语法规范>#</a></h3><p>通用语法</p><ul><li>命令中间用逗号分隔，可以单行或者多行书写，以分号结尾</li><li>可以使用空格和缩进来增加语句的可读性</li><li>命令不区分大小写，建议 <strong>关键字大写</strong>，数据库名、表名、列名小写</li><li>注释方式：<code>--</code>、<code>#</code>（仅 MySQL） 单行注释；<code>/* */</code> 多行注释</li></ul><p>分类</p><ul><li>数据定义语言（DDL）：用来定义数据库对象，比如数据库、表、列等</li><li>数据操作语言（DML）：用来对数据库中表的记录进行更新</li><li>数据查询语言（DQL）：用来查询数据库中表的记录</li><li>数据控制语言（DCL）：用来定义数据库的访问权限和安全级别及创建用户</li></ul><h3 id=ddl-数据库操作>DDL 数据库操作<a hidden class=anchor aria-hidden=true href=#ddl-数据库操作>#</a></h3><h4 id=创建>创建<a hidden class=anchor aria-hidden=true href=#创建>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e># 创建数据库语法
</span><span style=color:#75715e># {} 必选项；｜ 或；[] 可选项
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#960050;background-color:#1e0010>{</span><span style=color:#66d9ef>DATABASE</span><span style=color:#f92672>|</span><span style=color:#66d9ef>SCHEMA</span><span style=color:#960050;background-color:#1e0010>}</span> [<span style=color:#66d9ef>IF</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>EXISTS</span>] <span style=color:#960050;background-color:#1e0010>数据库名</span> <span style=color:#66d9ef>CHARACTER</span> <span style=color:#66d9ef>SET</span> [<span style=color:#f92672>=</span>] <span style=color:#960050;background-color:#1e0010>字符集</span>; 
</code></pre></div><p>创建数据库注意事项：</p><ul><li>不能与其他数据库重名</li><li>名称可以由任意字母、阿拉伯数字、下划线和 <code>$</code> 组成，但不能使用单独的数字</li><li>名称最长可为 <code>64</code> 个字符，别名最长为 <code>256</code> 个字符</li><li>不能使用 MySQL 关键字作为数据库名</li><li>建议采用小写来定义数据库名</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 创建数据库
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> test_db;
<span style=color:#75715e>-- 指定字符集为 utf-8
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> test_db2 <span style=color:#66d9ef>CHARACTER</span> <span style=color:#66d9ef>SET</span> utf8;
<span style=color:#75715e>-- 创建数据库前判断是否存在同名数据库
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> <span style=color:#66d9ef>IF</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>EXISTS</span> test_db3 <span style=color:#66d9ef>CHARACTER</span> <span style=color:#66d9ef>SET</span> utf8;
</code></pre></div><h4 id=查看>查看<a hidden class=anchor aria-hidden=true href=#查看>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 查看所有数据库
</span><span style=color:#75715e></span><span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>DATABASES</span>;
<span style=color:#75715e>-- 指定为当前数据库
</span><span style=color:#75715e></span><span style=color:#66d9ef>USE</span> <span style=color:#960050;background-color:#1e0010>数据库名</span>;
<span style=color:#75715e>-- 查看数据库定义信息
</span><span style=color:#75715e></span><span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> <span style=color:#960050;background-color:#1e0010>数据库名</span>;
</code></pre></div><h4 id=修改>修改<a hidden class=anchor aria-hidden=true href=#修改>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 修改数据库相关参数，如果不指定数据库名则表示修改当前的数据库
</span><span style=color:#75715e></span><span style=color:#66d9ef>ALTER</span> <span style=color:#960050;background-color:#1e0010>{</span><span style=color:#66d9ef>DATABASE</span><span style=color:#960050;background-color:#1e0010>}</span> [<span style=color:#960050;background-color:#1e0010>数据库名</span>] <span style=color:#66d9ef>CHARACTER</span> <span style=color:#66d9ef>SET</span> [<span style=color:#f92672>=</span>] <span style=color:#960050;background-color:#1e0010>字符集</span>;

<span style=color:#75715e>-- 实例
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> db1 <span style=color:#66d9ef>CHARACTER</span> <span style=color:#66d9ef>SET</span> gbk;
<span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>DATABASE</span> db1 <span style=color:#66d9ef>CHARACTER</span> <span style=color:#66d9ef>SET</span> utf8;
</code></pre></div><h4 id=删除>删除<a hidden class=anchor aria-hidden=true href=#删除>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 删除数据库; 删除后数据结构和数据都没了
</span><span style=color:#75715e></span><span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>DATABASE</span> [<span style=color:#66d9ef>IF</span> <span style=color:#66d9ef>EXISTS</span>] <span style=color:#960050;background-color:#1e0010>数据库名</span>;
</code></pre></div><h3 id=ddl-表操作>DDL 表操作<a hidden class=anchor aria-hidden=true href=#ddl-表操作>#</a></h3><p>MySQL 的数据类型</p><ul><li>数字类型（大概下面三种，长短整型、双精度浮点型等不详细列了）<ul><li>INT 整型</li><li>FLOAT 浮点型</li><li>BOOLEAN 布尔值</li></ul></li><li>字符串类型<ul><li>CHAR 固定长度（1-255）</li><li>VARCHAR 长度可变，不超过 255 个字符</li><li>TEXT 最大长度为 64K 的变长文本</li></ul></li><li>日期和时间类型<ul><li>DATE 日期</li><li>TIME 时间</li><li>DATETIME 日期和时间</li><li>TIMESTAMP 时间戳</li><li>YEAR 年份</li></ul></li></ul><h4 id=创建-1>创建<a hidden class=anchor aria-hidden=true href=#创建-1>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 创建表；列名在表中唯一
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#960050;background-color:#1e0010>数据表名</span> (
	<span style=color:#960050;background-color:#1e0010>列名</span> <span style=color:#960050;background-color:#1e0010>数据类型</span> [<span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>NULL</span>] [<span style=color:#66d9ef>DEFAULT</span> <span style=color:#960050;background-color:#1e0010>默认值</span>] [<span style=color:#66d9ef>AUTO_INCREMENT</span>] [<span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>] [<span style=color:#960050;background-color:#1e0010>注释</span>],
    ...
);

<span style=color:#75715e>-- AUTO_INCREMENT 是否自动编号
</span><span style=color:#75715e>-- PRIMARY KEY 是否为主键
</span><span style=color:#75715e></span>
<span style=color:#75715e>-- 复制表(结构)
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#960050;background-color:#1e0010>数据表名</span> <span style=color:#960050;background-color:#1e0010>{</span><span style=color:#66d9ef>LIKE</span> <span style=color:#960050;background-color:#1e0010>源数据表名</span> <span style=color:#f92672>|</span> (<span style=color:#66d9ef>LIKE</span> <span style=color:#960050;background-color:#1e0010>源数据表名</span>)<span style=color:#960050;background-color:#1e0010>}</span>;
</code></pre></div><p>实例</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 切换到数据库
</span><span style=color:#75715e></span><span style=color:#66d9ef>USE</span> db1;

<span style=color:#75715e>-- 创建学员表
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>student</span> (
	id <span style=color:#66d9ef>INT</span>,
    name <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>)
);

<span style=color:#75715e>-- 复制学员表
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> student_cpy <span style=color:#66d9ef>LIKE</span> student;
</code></pre></div><h4 id=查看-1>查看<a hidden class=anchor aria-hidden=true href=#查看-1>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 查看表名
</span><span style=color:#75715e></span><span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>TABLES</span>;

<span style=color:#75715e>-- 查看表结构
</span><span style=color:#75715e></span><span style=color:#66d9ef>DESCRIBE</span> <span style=color:#960050;background-color:#1e0010>数据表名</span>;
<span style=color:#75715e>-- 简写
</span><span style=color:#75715e></span><span style=color:#66d9ef>DESC</span> <span style=color:#960050;background-color:#1e0010>数据表名</span>;
<span style=color:#66d9ef>DESC</span> <span style=color:#960050;background-color:#1e0010>数据表名</span> <span style=color:#960050;background-color:#1e0010>列名</span>;
</code></pre></div><h4 id=修改-1>修改<a hidden class=anchor aria-hidden=true href=#修改-1>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 添加新列
</span><span style=color:#75715e></span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#960050;background-color:#1e0010>表名</span> <span style=color:#66d9ef>ADD</span> <span style=color:#960050;background-color:#1e0010>列名</span> <span style=color:#960050;background-color:#1e0010>列属性</span>;

<span style=color:#75715e>-- 修改列定义
</span><span style=color:#75715e></span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#960050;background-color:#1e0010>表名</span> MODIFY <span style=color:#960050;background-color:#1e0010>列名</span> <span style=color:#960050;background-color:#1e0010>列属性</span>;

<span style=color:#75715e>-- 修改列名
</span><span style=color:#75715e></span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#960050;background-color:#1e0010>表名</span> <span style=color:#66d9ef>CHANGE</span> <span style=color:#960050;background-color:#1e0010>旧列名</span> <span style=color:#960050;background-color:#1e0010>新列名</span> <span style=color:#960050;background-color:#1e0010>类型</span>;
</code></pre></div><p>实例</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 切换数据库
</span><span style=color:#75715e></span><span style=color:#66d9ef>USE</span> db1;
<span style=color:#75715e>-- 添加列
</span><span style=color:#75715e></span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> student <span style=color:#66d9ef>ADD</span> email <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>50</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>;
<span style=color:#75715e>-- 修改列定义
</span><span style=color:#75715e></span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> student <span style=color:#66d9ef>ADD</span> score <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>;
<span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> student MODIFY score <span style=color:#66d9ef>INT</span>;
<span style=color:#75715e>-- 修改列名
</span><span style=color:#75715e></span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> student <span style=color:#66d9ef>CHANGE</span> <span style=color:#66d9ef>COLUMN</span> name stu_name <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>30</span>) <span style=color:#66d9ef>DEFAULT</span> <span style=color:#66d9ef>NULL</span>;
<span style=color:#75715e>-- 查看表结构，验证修改生效
</span><span style=color:#75715e></span><span style=color:#66d9ef>DESC</span> student;
</code></pre></div><h4 id=删除列>删除列<a hidden class=anchor aria-hidden=true href=#删除列>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#960050;background-color:#1e0010>表名</span> <span style=color:#66d9ef>DROP</span> <span style=color:#960050;background-color:#1e0010>列名</span>;

<span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> student <span style=color:#66d9ef>DROP</span> score;
</code></pre></div><h4 id=修改表名>修改表名<a hidden class=anchor aria-hidden=true href=#修改表名>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 方式一
</span><span style=color:#75715e></span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#960050;background-color:#1e0010>旧表名</span> <span style=color:#66d9ef>RENAME</span> <span style=color:#66d9ef>AS</span> <span style=color:#960050;background-color:#1e0010>新表名</span>;

<span style=color:#75715e>-- 方式二
</span><span style=color:#75715e></span><span style=color:#66d9ef>RENAME</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#960050;background-color:#1e0010>旧表名</span> <span style=color:#66d9ef>TO</span> <span style=color:#960050;background-color:#1e0010>新表名</span>;
</code></pre></div><h4 id=删除表>删除表<a hidden class=anchor aria-hidden=true href=#删除表>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>TABLE</span> [<span style=color:#66d9ef>IF</span> <span style=color:#66d9ef>EXISTS</span>] <span style=color:#960050;background-color:#1e0010>数据表名</span>;
</code></pre></div><h3 id=dml-表数据操作>DML 表数据操作<a hidden class=anchor aria-hidden=true href=#dml-表数据操作>#</a></h3><h4 id=插入>插入<a hidden class=anchor aria-hidden=true href=#插入>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 插入数据 列名和值一一对应
</span><span style=color:#75715e></span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#960050;background-color:#1e0010>数据表名</span> (<span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>1</span>, <span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>2</span>, ...) <span style=color:#66d9ef>VALUES</span> (<span style=color:#960050;background-color:#1e0010>值</span><span style=color:#ae81ff>1</span>, <span style=color:#960050;background-color:#1e0010>值</span><span style=color:#ae81ff>2</span>, ...);
</code></pre></div><p>注意事项：</p><ul><li>值与字段必须对应，个数相同且数据类型相同</li><li>值的数据大小，必须在字段指定的长度范围内</li><li>VARCHAR、CHAR、DATE 类型的值，必须使用单引号括起来</li><li>如果要插入空值，可以忽略不写，或者插入 NULL</li><li>如果插入指定字段的值，必须写上列名</li></ul><h4 id=修改-2>修改<a hidden class=anchor aria-hidden=true href=#修改-2>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>UPDATE</span> <span style=color:#960050;background-color:#1e0010>数据表名</span> <span style=color:#66d9ef>SET</span> <span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>1</span><span style=color:#f92672>=</span><span style=color:#960050;background-color:#1e0010>值</span><span style=color:#ae81ff>1</span> [, <span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>2</span><span style=color:#f92672>=</span><span style=color:#960050;background-color:#1e0010>值</span><span style=color:#ae81ff>2</span>, ...] [<span style=color:#66d9ef>WHERE</span> <span style=color:#960050;background-color:#1e0010>条件表达式</span>];
</code></pre></div><h4 id=删除-1>删除<a hidden class=anchor aria-hidden=true href=#删除-1>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 通过 delete 语句; 未指定条件则删除表中全部数据
</span><span style=color:#75715e></span><span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表名</span> [<span style=color:#66d9ef>WHERE</span> <span style=color:#960050;background-color:#1e0010>条件表达式</span>];

<span style=color:#75715e>-- 通过 truncate table 语句删除表中全部数据
</span><span style=color:#75715e></span>TRUNCATE <span style=color:#66d9ef>TABLE</span> <span style=color:#960050;background-color:#1e0010>表名</span>;
</code></pre></div><p>如果需要删除整张表，推荐使用 <code>TRUNCATE</code> 语句：</p><ul><li>DELETE：每条数据都会执行一次删除，效率低</li><li>TRUNCATE：删除整张表，然后重新创建空表，效率高</li></ul><p><strong>实例</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 切换数据库
</span><span style=color:#75715e></span><span style=color:#66d9ef>USE</span> db1;

<span style=color:#75715e>-- 创建 user 表
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#66d9ef>user</span>(
	id <span style=color:#66d9ef>INT</span>,
    name <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>),
    age <span style=color:#66d9ef>INT</span>,
    sex <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>1</span>),
    address <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>40</span>)
);

<span style=color:#75715e>/* 插入 */</span>
<span style=color:#75715e>-- 插入一条完整的数据
</span><span style=color:#75715e></span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#66d9ef>user</span> (id, name, age, sex, address) <span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#39;张三&#39;</span>, <span style=color:#ae81ff>20</span>, <span style=color:#e6db74>&#39;男&#39;</span>, <span style=color:#e6db74>&#39;北京&#39;</span>);

<span style=color:#75715e>-- 插入一条完整的数据，可以不用写列名，值按照表的列的顺序插入
</span><span style=color:#75715e></span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#66d9ef>user</span> <span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>2</span>, <span style=color:#e6db74>&#39;李四&#39;</span>, <span style=color:#ae81ff>19</span>, <span style=color:#e6db74>&#39;女&#39;</span>, <span style=color:#e6db74>&#39;上海&#39;</span>);

<span style=color:#75715e>-- 插入表中某几列的值，没有值的列自动为 NULL
</span><span style=color:#75715e></span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#66d9ef>user</span> (id, name, address) <span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>3</span>, <span style=color:#e6db74>&#39;王五&#39;</span>, <span style=color:#e6db74>&#39;深圳&#39;</span>);

<span style=color:#75715e>-- 插入多条数据
</span><span style=color:#75715e></span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#66d9ef>user</span> (id, name, address) <span style=color:#66d9ef>VALUES</span> 
	(<span style=color:#ae81ff>4</span>, <span style=color:#e6db74>&#39;赵六&#39;</span>, <span style=color:#e6db74>&#39;天津&#39;</span>),
	(<span style=color:#ae81ff>5</span>, <span style=color:#e6db74>&#39;周七&#39;</span>, <span style=color:#e6db74>&#39;杭州&#39;</span>);
	
<span style=color:#75715e>/* 修改 */</span>
<span style=color:#75715e>-- 不带条件修改，将所有的性别改为女
</span><span style=color:#75715e></span><span style=color:#66d9ef>UPDATE</span> <span style=color:#66d9ef>user</span> <span style=color:#66d9ef>SET</span> sex<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;女&#39;</span>;

<span style=color:#75715e>-- 带条件修改，id=3 的用户：性别修改为男
</span><span style=color:#75715e></span><span style=color:#66d9ef>UPDATE</span> <span style=color:#66d9ef>user</span> <span style=color:#66d9ef>SET</span> sex<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;男&#39;</span> <span style=color:#66d9ef>WHERE</span> id<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>;

<span style=color:#75715e>-- 修改多个列的数据，id=2 的用户：年龄修改为 30，地址修改为 北京
</span><span style=color:#75715e></span><span style=color:#66d9ef>UPDATE</span> <span style=color:#66d9ef>user</span> <span style=color:#66d9ef>SET</span> age<span style=color:#f92672>=</span><span style=color:#ae81ff>30</span>, adress<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;北京&#39;</span> <span style=color:#66d9ef>WHERE</span> id<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>;

<span style=color:#75715e>/* 删除 */</span>
<span style=color:#75715e>-- 删除 id=1 的用户数据
</span><span style=color:#75715e></span><span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>user</span> <span style=color:#66d9ef>WHERE</span> id<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>;

<span style=color:#75715e>-- 删除表中所有的数据
</span><span style=color:#75715e></span><span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>user</span>;
TRUNCATE <span style=color:#66d9ef>TABLE</span> <span style=color:#66d9ef>user</span>;
</code></pre></div><h3 id=dql-表查询操作>DQL 表查询操作<a hidden class=anchor aria-hidden=true href=#dql-表查询操作>#</a></h3><p>在进行查询前，先进行数据准备工作，使用开源的数据示例。</p><blockquote><p><a href=https://github.com/datacharmer/test_db>https://github.com/datacharmer/test_db</a></p><p>该数据库包含大约 300,000 条员工记录和 280 万条工资条目。导出数据为 167 MB，对于测试来说足够。</p></blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># 这里通过 docker 启动 mysql:5.7 的容器进行测试</span>

<span style=color:#75715e># 1、下载数据文件</span>
$ cd workspace/github
$ git clone git@github.com:datacharmer/test_db.git

<span style=color:#75715e># 2、启动 mysql 容器，挂载数据文件到容器内</span>
$ docker pull mysql:5.7
$ docker run --name<span style=color:#f92672>=</span>mysql -it -p 3306:3306 -e MYSQL_ROOT_PASSWORD<span style=color:#f92672>=</span>root -e MYSQL_ROOT_HOST<span style=color:#f92672>=</span>% -v /workspace/github/test_db:/opt -d mysql:5.7

<span style=color:#75715e># 3、导入数据库</span>
$ docker exec -it mysql /bin/bash
$ mysql -h 127.0.0.1 -u root -p &lt; /opt/employees.sql
Enter password: root

<span style=color:#75715e># 等待导入完成，大概 1 分钟+</span>
</code></pre></div><h4 id=单表查询>单表查询<a hidden class=anchor aria-hidden=true href=#单表查询>#</a></h4><blockquote><p>从一张表中查询所需要的数据。</p></blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 查询全部数据
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表名</span>;

<span style=color:#75715e>-- 实例：查询部门表中的信息
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> departments;
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 查询多个字段（列）, 多个列中间用逗号分隔
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#960050;background-color:#1e0010>列名</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表名</span>;

<span style=color:#75715e>-- 实例：查询部门名称
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> dept_name <span style=color:#66d9ef>FROM</span> departments;
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>/* 起别名 */</span>
<span style=color:#75715e>-- 为表起别名
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#960050;background-color:#1e0010>列名</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表名</span> <span style=color:#960050;background-color:#1e0010>表别名</span>;
<span style=color:#75715e>-- 为字段起别名
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#960050;background-color:#1e0010>列名</span> <span style=color:#66d9ef>AS</span> <span style=color:#960050;background-color:#1e0010>别名</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表名</span>;

<span style=color:#75715e>-- 实例：查询员工信息，并将列名改为中文，表名改为 emp
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span>
	emp_no <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>&#39;编号&#39;</span>,
	first_name <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>&#39;名&#39;</span>,
	last_name <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>&#39;姓&#39;</span>,
	gender <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>&#39;性别&#39;</span>,
	hire_date <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>&#39;入职时间&#39;</span> 
<span style=color:#66d9ef>FROM</span>
	employees emp;
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 去重
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>DISTINCT</span> <span style=color:#960050;background-color:#1e0010>列名</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表名</span>;

<span style=color:#75715e>-- 实例：去掉重复职级信息
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>DISTINCT</span> title <span style=color:#66d9ef>FROM</span> titles;
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 查询结果参与运算
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> (<span style=color:#960050;background-color:#1e0010>列名</span> <span style=color:#960050;background-color:#1e0010>运算表达式</span>) <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表名</span>;

<span style=color:#75715e>-- 实例：所有员工的工资 +1000 进行显示
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> emp_no, salary <span style=color:#f92672>+</span> <span style=color:#ae81ff>1000</span> <span style=color:#66d9ef>FROM</span> salaries;
</code></pre></div><h4 id=条件查询>条件查询<a hidden class=anchor aria-hidden=true href=#条件查询>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 条件查询
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#960050;background-color:#1e0010>列名</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表名</span> <span style=color:#66d9ef>WHERE</span> <span style=color:#960050;background-color:#1e0010>条件表达式</span>;
</code></pre></div><h5 id=比较运算法>比较运算法<a hidden class=anchor aria-hidden=true href=#比较运算法>#</a></h5><ul><li>大于（>）、小于（&lt;）、>=、&lt;=</li><li>等于（=）如果是字符，则比较 ASCII 码</li><li>不等于（&lt;>、!=）</li><li>范围限定（BETWEEN&mldr;AND&mldr;）</li><li>子集限定（IN）</li><li>模糊查询（LIKE &lsquo;%or%'）</li><li>为空（IS NULL）</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 实例：比较大小，查询出生日期晚于 1965-01-01 的员工编号、姓名和生日
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> emp_no, first_name, birth_date <span style=color:#66d9ef>FROM</span> employees  <span style=color:#66d9ef>WHERE</span> birth_date <span style=color:#f92672>&gt;</span> <span style=color:#e6db74>&#39;1965-01-01&#39;</span>;
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 使用 BETWEEN 进行模糊查询
</span><span style=color:#75715e></span><span style=color:#66d9ef>WHERE</span> <span style=color:#960050;background-color:#1e0010>列名</span> [<span style=color:#66d9ef>NOT</span>] <span style=color:#66d9ef>BETWEEN</span> <span style=color:#960050;background-color:#1e0010>起始表达式</span> <span style=color:#66d9ef>AND</span> <span style=color:#960050;background-color:#1e0010>结束表达式</span>

<span style=color:#75715e>-- 实例：查询年薪介于 70000 到 70003 之间的员工编号和年薪
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> emp_no, salary <span style=color:#66d9ef>FROM</span> salaries <span style=color:#66d9ef>WHERE</span> salary <span style=color:#66d9ef>BETWEEN</span> <span style=color:#ae81ff>70000</span> <span style=color:#66d9ef>AND</span> <span style=color:#ae81ff>70003</span>;
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 使用 IN 进行模糊查询, 常量列表使用逗号隔开
</span><span style=color:#75715e></span><span style=color:#66d9ef>WHERE</span> <span style=color:#960050;background-color:#1e0010>列名</span> <span style=color:#66d9ef>IN</span> (<span style=color:#960050;background-color:#1e0010>常量列表</span>)

<span style=color:#75715e>-- 实例：查询入职日期为 1995-01-27 和 1995-03-20 的员工信息
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>WHERE</span> hire_date <span style=color:#66d9ef>IN</span> (<span style=color:#e6db74>&#39;1995-01-27&#39;</span>, <span style=color:#e6db74>&#39;1995-03-20&#39;</span>);
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 判断是否为空
</span><span style=color:#75715e></span><span style=color:#66d9ef>WHERE</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>IS</span> [<span style=color:#66d9ef>NOT</span>] <span style=color:#66d9ef>NULL</span>

<span style=color:#75715e>-- 实例：查询性别为空的员工信息
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>WHERE</span> gender <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NULL</span>;  <span style=color:#75715e>-- 没有为空的数据
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>WHERE</span> gender <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>;  <span style=color:#75715e>-- 全部员工数据
</span></code></pre></div><h5 id=逻辑运算法>逻辑运算法<a hidden class=anchor aria-hidden=true href=#逻辑运算法>#</a></h5><ul><li>AND 或 &&：多个条件同时成立</li><li>OR 或 ||：多个条件任一成立</li><li>NOT：不成立</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 查询名字为 Lillian 并且姓氏为 Haddadi 的员工信息
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>WHERE</span> first_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Lillian&#39;</span> <span style=color:#66d9ef>AND</span> last_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Haddadi&#39;</span>;

<span style=color:#75715e>-- 查询名字为 Lillian 或者姓氏为 Terkki 的员工信息
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>WHERE</span> first_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Lillian&#39;</span> <span style=color:#66d9ef>OR</span> last_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Terkki&#39;</span>;

<span style=color:#75715e>-- 查询名字为 Lillian 并且性别不是女的员工信息
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>WHERE</span> first_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Lillian&#39;</span> <span style=color:#66d9ef>AND</span> <span style=color:#66d9ef>NOT</span> gender <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;F&#39;</span>;
</code></pre></div><h5 id=通配符>通配符<a hidden class=anchor aria-hidden=true href=#通配符>#</a></h5><ul><li>%：匹配任意多个字符</li><li>_：匹配一个字符</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 查询名字中包含 fai 的员工信息
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>WHERE</span> first_name <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;%fai%&#39;</span>;

<span style=color:#75715e>-- 查询名字中 fa 开头的且长度为 3 位的员工信息
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>WHERE</span> first_name <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;fa_&#39;</span>;
</code></pre></div><h4 id=排序>排序<a hidden class=anchor aria-hidden=true href=#排序>#</a></h4><p>排序语法</p><ul><li>ASC：升序（默认）</li><li>DESC：降序</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 对查询结果进行排序
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#960050;background-color:#1e0010>列名</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表名</span> [<span style=color:#66d9ef>WHERE</span> <span style=color:#960050;background-color:#1e0010>条件表达式</span>] 
	<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> 
	<span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>1</span> [<span style=color:#66d9ef>ASC</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>DESC</span>], <span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>2</span> [<span style=color:#66d9ef>ASC</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>DESC</span>];
</code></pre></div><h5 id=单列排序>单列排序<a hidden class=anchor aria-hidden=true href=#单列排序>#</a></h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 使用 salary 字段，对 salaraies 表数据进行 升序/降序 排序
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> salaries <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> salary;
<span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> salaries <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> salary <span style=color:#66d9ef>DESC</span>;

<span style=color:#75715e>-- 查询员工的编号和入职日期，按照员工入职日期从晚到早排序
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> emp_no, hire_date <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> hire_date <span style=color:#66d9ef>DESC</span>;
</code></pre></div><h5 id=组合排序>组合排序<a hidden class=anchor aria-hidden=true href=#组合排序>#</a></h5><p>同时对多个字段进行排序，如果第一个字段相同，就按照第二个字段进行排序。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 在入职时间排序的基础上，再使用 emp_no 进行降序排序
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> emp_no, hire_date <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> hire_date <span style=color:#66d9ef>DESC</span>, emp_no <span style=color:#66d9ef>DESC</span>;
</code></pre></div><h4 id=聚合函数>聚合函数<a hidden class=anchor aria-hidden=true href=#聚合函数>#</a></h4><ul><li>COUNT()：统计指定列不为 NULL 的记录行数</li><li>MAX()：计算指定列的最大值</li><li>MIN()：计算指定列的最小值</li><li>SUM()：计算指定列的数值和</li><li>AVG()：计算指定列的平均值</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 聚合查询语法
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#960050;background-color:#1e0010>聚合函数</span>(<span style=color:#960050;background-color:#1e0010>列名</span>) <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表名</span>;

<span style=color:#75715e>-- 实例
</span><span style=color:#75715e>-- 查询职级名称为 Senior Engineer 的员工数量
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>COUNT</span>(title) <span style=color:#66d9ef>FROM</span> titles <span style=color:#66d9ef>WHERE</span> title <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Senior Engineer&#39;</span>;
<span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>COUNT</span>(<span style=color:#f92672>*</span>) <span style=color:#66d9ef>FROM</span> titles <span style=color:#66d9ef>WHERE</span> title <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Senior Engineer&#39;</span>;

<span style=color:#75715e>-- 查询员工编号为 10002 的员工的最高年薪
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>MAX</span>(salary) <span style=color:#66d9ef>FROM</span> salaries <span style=color:#66d9ef>WHERE</span> emp_no <span style=color:#f92672>=</span> <span style=color:#ae81ff>10002</span>;

<span style=color:#75715e>-- 查询最低年薪
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>MIN</span>(salary) <span style=color:#66d9ef>FROM</span> salaries <span style=color:#66d9ef>WHERE</span> emp_no <span style=color:#f92672>=</span> <span style=color:#ae81ff>10002</span>;

<span style=color:#75715e>-- 查询薪资总和
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>SUM</span>(salary) <span style=color:#66d9ef>FROM</span> salaries <span style=color:#66d9ef>WHERE</span> emp_no <span style=color:#f92672>=</span> <span style=color:#ae81ff>10002</span>;

<span style=color:#75715e>-- 计算平均薪资
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>AVG</span>(salary) <span style=color:#66d9ef>FROM</span> salaries <span style=color:#66d9ef>WHERE</span> emp_no <span style=color:#f92672>=</span> <span style=color:#ae81ff>10002</span>;
</code></pre></div><h4 id=分组>分组<a hidden class=anchor aria-hidden=true href=#分组>#</a></h4><p>分组查询语法</p><ul><li>分组列：按哪些列进行分组</li><li>HAVING：对分组结果再次过滤</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 分组查询语法
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> (<span style=color:#960050;background-color:#1e0010>分组列</span> <span style=color:#960050;background-color:#1e0010>｜</span> <span style=color:#960050;background-color:#1e0010>聚合函数</span>) <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表名</span> <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> <span style=color:#960050;background-color:#1e0010>分组列</span> [<span style=color:#66d9ef>HAVING</span> <span style=color:#960050;background-color:#1e0010>条件</span>];
</code></pre></div><p>实例</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 查询每个员工的薪资和
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> emp_no, <span style=color:#a6e22e>SUM</span>(salary) <span style=color:#66d9ef>FROM</span> salaries <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> emp_no;

<span style=color:#75715e>-- 查询员工编号小于 10010 且薪资和小于 400000 的员工的薪资和
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> emp_no, <span style=color:#a6e22e>SUM</span>(salary) <span style=color:#66d9ef>FROM</span> salaries <span style=color:#66d9ef>WHERE</span> emp_no <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10010</span> <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> emp_no <span style=color:#66d9ef>HAVING</span> <span style=color:#a6e22e>SUM</span>(salary) <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>400000</span>;
</code></pre></div><p>子句区别</p><ul><li>WHERE 子句：从数据源中去掉不符合搜索条件的数据</li><li>GROUP BY 子句：搜集数据行到各个组中，统计函数为各个组计算统计值</li><li>HAVING 子句：去掉不符合其组搜索条件的各行数据行</li></ul><h4 id=limit-关键字>LIMIT 关键字<a hidden class=anchor aria-hidden=true href=#limit-关键字>#</a></h4><p>限制查询结果的数量</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 限制查询结果行数
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>1</span>, <span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>2</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表名</span> <span style=color:#66d9ef>LIMIT</span> [<span style=color:#960050;background-color:#1e0010>开始的行数</span>], <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>查询记录的条数</span><span style=color:#f92672>&gt;</span>;

<span style=color:#75715e>-- 使用 OFFSET 关键自指定开始的行数
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>1</span>, <span style=color:#960050;background-color:#1e0010>列名</span><span style=color:#ae81ff>2</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表名</span> <span style=color:#66d9ef>LIMIT</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>查询记录的条数</span><span style=color:#f92672>&gt;</span> OFFSET <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>开始的行数</span><span style=color:#f92672>&gt;</span>;

<span style=color:#75715e>-- 开始的行数：从 0 开始，默认为 0
</span><span style=color:#75715e>-- 查询记录的条数：返回的行数
</span></code></pre></div><p>实例</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 展示前 10 条员工信息
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>10</span>;
<span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>10</span>;
<span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> employees <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>10</span> OFFSET <span style=color:#ae81ff>0</span>;

<span style=color:#75715e>-- 显示年薪从高到低排序，第 15 位到第 20 员工的编号和年薪
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> emp_no, salary <span style=color:#66d9ef>FROM</span> salaries <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> salary <span style=color:#66d9ef>DESC</span> <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>14</span>, <span style=color:#ae81ff>6</span>;
<span style=color:#66d9ef>SELECT</span> emp_no, salary <span style=color:#66d9ef>FROM</span> salaries <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> salary <span style=color:#66d9ef>DESC</span> <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>6</span> OFFSET <span style=color:#ae81ff>14</span>;
</code></pre></div><h4 id=单表查询总结>单表查询总结<a hidden class=anchor aria-hidden=true href=#单表查询总结>#</a></h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>DISTINCT</span> <span style=color:#960050;background-color:#1e0010>列名</span> 
<span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表名</span>
<span style=color:#66d9ef>WHERE</span> <span style=color:#960050;background-color:#1e0010>查询条件表达式</span>
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> <span style=color:#960050;background-color:#1e0010>分组的列名</span>
<span style=color:#66d9ef>HAVING</span> <span style=color:#960050;background-color:#1e0010>分组后的查询条件表达式</span>
<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#960050;background-color:#1e0010>排序的列名</span> [<span style=color:#66d9ef>ASC</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>DESC</span>]
<span style=color:#66d9ef>LIMIT</span> <span style=color:#960050;background-color:#1e0010>开始的行数</span>, <span style=color:#960050;background-color:#1e0010>查询记录的条数</span>;
</code></pre></div><p><img loading=lazy src=https://gitee.com/abeelan/image-hosting-service/raw/master/img/image-20220507113411670.png alt="SQL 语句执行顺序"></p><h2 id=sql-约束>SQL 约束<a hidden class=anchor aria-hidden=true href=#sql-约束>#</a></h2><p>对表中的数据进行进一步的限制，保证数据的正确性、有效性、完整性。违反约束的不正确数据无法插入到表中。常见的约束：</p><ul><li>主键：PRIMARY KEY</li><li>非空：NOT NULL</li><li>唯一：UNIQUE</li><li>默认：DEFAULT</li><li>外键：FOREIGN KEY</li></ul><h3 id=主键约束>主键约束<a hidden class=anchor aria-hidden=true href=#主键约束>#</a></h3><p>主键：一列（或一组列），其值能够唯一标识表中的每一行</p><p>特点：不可重复，唯一，非空</p><p>语法：列名 字段类型 PRIMARY KEY</p><h5 id=创建带有主键的表>创建带有主键的表<a hidden class=anchor aria-hidden=true href=#创建带有主键的表>#</a></h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 创建一个带有主键的表
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>emp1</span>(
    <span style=color:#75715e>-- 设为主键后自动非空
</span><span style=color:#75715e></span>	eid <span style=color:#66d9ef>INT</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>,
	ename <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>),
	gender <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>1</span>)
);

<span style=color:#75715e>-- 向已有的表中添加主键
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>emp2</span>(
	eid <span style=color:#66d9ef>INT</span>,
	ename <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>),
	gender <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>1</span>)
);
<span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> emp2 <span style=color:#66d9ef>ADD</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>(eid);
<span style=color:#75715e>-- 向 emp1 中添加数据，验证主键非空和不能重复的特性
</span><span style=color:#75715e></span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> emp1 <span style=color:#66d9ef>VALUES</span>(<span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#39;zhangsan&#39;</span>, <span style=color:#e6db74>&#39;M&#39;</span>);
<span style=color:#75715e>-- 插入空值插入报错，主键不能为空
</span><span style=color:#75715e>-- INSERT INTO emp1 VALUES(NULL, &#39;lisi&#39;, &#39;W&#39;);
</span><span style=color:#75715e>-- 插入重复数据报错，主键不能重复
</span><span style=color:#75715e>-- INSERT INTO emp1 VALUES(1, &#39;lisi&#39;, &#39;F&#39;);
</span></code></pre></div><h5 id=主键自增>主键自增<a hidden class=anchor aria-hidden=true href=#主键自增>#</a></h5><p>由于主键的特性，每次人为按顺序添加难免出错，可以使用自增的属性。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 创建主键自增
</span><span style=color:#75715e>-- AUTO_INCREMENT: 表示自动增长（必须整数类型的字段），默认从 1 开始
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>emp3</span>(
	eid <span style=color:#66d9ef>INT</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> <span style=color:#66d9ef>AUTO_INCREMENT</span>,
	ename <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>),
	gender <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>1</span>)
);
<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> emp3 <span style=color:#66d9ef>VALUEs</span>(<span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#39;zhangsan&#39;</span>, <span style=color:#e6db74>&#39;M&#39;</span>);
<span style=color:#75715e>-- 只需要添加名字和性别即可，id 会自增
</span><span style=color:#75715e></span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#a6e22e>emp3</span>(ename, gender) <span style=color:#66d9ef>VALUES</span>(<span style=color:#e6db74>&#39;lisi&#39;</span>, <span style=color:#e6db74>&#39;M&#39;</span>), (<span style=color:#e6db74>&#39;wangwu&#39;</span>, <span style=color:#e6db74>&#39;F&#39;</span>);

<span style=color:#75715e>-- 修改主键自增起始值为 100
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>emp4</span>(
	eid <span style=color:#66d9ef>INT</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> <span style=color:#66d9ef>AUTO_INCREMENT</span>,
	ename <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>),
	gender <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>1</span>)
)<span style=color:#66d9ef>AUTO_INCREMENT</span><span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>;
<span style=color:#75715e># DELETE FROM emp4;    删除表后，添加数据会继续之前的编号往上自增
</span><span style=color:#75715e># TRUNCATE TABLE emp4; 先删除整表后重新创建，自增会从起始值开始
</span></code></pre></div><h5 id=删除主键约束>删除主键约束<a hidden class=anchor aria-hidden=true href=#删除主键约束>#</a></h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 删除表中的主键
</span><span style=color:#75715e></span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#960050;background-color:#1e0010>表名</span> <span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>;

<span style=color:#75715e>-- 实例：删除表2 的主键
</span><span style=color:#75715e></span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> emp2 <span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span>;
</code></pre></div><h5 id=选择主键原则>选择主键原则<a hidden class=anchor aria-hidden=true href=#选择主键原则>#</a></h5><ul><li>针对业务设计主键，建议每张表都设计一个主键</li><li>主键可以没有业务意义，只需保证不重复</li></ul><h3 id=非空约束>非空约束<a hidden class=anchor aria-hidden=true href=#非空约束>#</a></h3><p>特点：某一列不允许为空</p><p>语法：列名 字段类型 NOT NULL</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 创建非空约束的表
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>emp5</span> (
	eid <span style=color:#66d9ef>INT</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> <span style=color:#66d9ef>AUTO_INCREMENT</span>,
	ename <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>,
	gender <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>1</span>)
);
<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#a6e22e>emp5</span>(ename, gender) <span style=color:#66d9ef>VALUES</span>(<span style=color:#e6db74>&#39;zhangsan&#39;</span>, <span style=color:#e6db74>&#39;F&#39;</span>);
<span style=color:#75715e>-- 报错：Field &#39;ename&#39; doesn&#39;t have a default value, Time: 0.001000s
</span><span style=color:#75715e></span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#a6e22e>emp5</span>(gender) <span style=color:#66d9ef>VALUES</span>(<span style=color:#e6db74>&#39;F&#39;</span>);
</code></pre></div><h3 id=唯一约束>唯一约束<a hidden class=anchor aria-hidden=true href=#唯一约束>#</a></h3><ul><li>表中的某一列的值不能重复</li><li>对 NULL 不做唯一的判断</li><li>语法：列名 字段类型 UNIQUE</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 创建带有唯一约束的表
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>emp6</span> (
	eid <span style=color:#66d9ef>INT</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> <span style=color:#66d9ef>AUTO_INCREMENT</span>,
	ename <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>) <span style=color:#66d9ef>UNIQUE</span>,
	gender <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>1</span>)
);
<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#a6e22e>emp6</span>(ename, gender) <span style=color:#66d9ef>VALUES</span>(<span style=color:#e6db74>&#39;zhangsan&#39;</span>, <span style=color:#e6db74>&#39;F&#39;</span>);
<span style=color:#75715e>-- 报错：Duplicate entry &#39;zhangsan&#39; for key &#39;ename&#39;, Time: 0.004000s
</span><span style=color:#75715e></span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#a6e22e>emp6</span>(ename, gender) <span style=color:#66d9ef>VALUES</span>(<span style=color:#e6db74>&#39;zhangsan&#39;</span>, <span style=color:#e6db74>&#39;F&#39;</span>);
</code></pre></div><p>主键约束与唯一约束的区别：</p><ul><li>主键约束：唯一且不能为空</li><li>唯一约束：唯一但可以为空</li><li>一个表中只能有一个主键，但是可以有多个唯一约束</li></ul><h3 id=默认值约束>默认值约束<a hidden class=anchor aria-hidden=true href=#默认值约束>#</a></h3><p>默认值约束：用来指定某列的默认值</p><p>语法：列名 字段类型 DEFAULT 默认值</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 创建带有默认值的表
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>emp7</span> (
	eid <span style=color:#66d9ef>INT</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> <span style=color:#66d9ef>AUTO_INCREMENT</span>,
	ename <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>),
	gender <span style=color:#66d9ef>CHAR</span>(<span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;F&#39;</span>
);
<span style=color:#75715e>-- 使用默认值，可以通过 DEFAULT 指定，也可以不写
</span><span style=color:#75715e></span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#a6e22e>emp7</span>(ename, gender) <span style=color:#66d9ef>VALUES</span>(<span style=color:#e6db74>&#39;zhangsan&#39;</span>, <span style=color:#66d9ef>DEFAULT</span>);
<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#a6e22e>emp7</span>(ename) <span style=color:#66d9ef>VALUES</span>(<span style=color:#e6db74>&#39;lisi&#39;</span>);
<span style=color:#75715e>-- 不使用默认值
</span><span style=color:#75715e></span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#a6e22e>emp7</span>(ename, gender) <span style=color:#66d9ef>VALUES</span>(<span style=color:#e6db74>&#39;wangwu&#39;</span>, <span style=color:#e6db74>&#39;M&#39;</span>);
</code></pre></div><h3 id=外键约束>外键约束<a hidden class=anchor aria-hidden=true href=#外键约束>#</a></h3><p>课程名称： SQL 约束 - 外键约束</p><p>TODO 不理解，等查阅完基础资料再来。</p><h5 id=创建表的同时创建外键约束>创建表的同时创建外键约束<a hidden class=anchor aria-hidden=true href=#创建表的同时创建外键约束>#</a></h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 创建主表
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>tester</span> (
	id <span style=color:#66d9ef>INT</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> <span style=color:#66d9ef>AUTO_INCREMENT</span>,
	name <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>),
	team_id <span style=color:#66d9ef>INT</span>,
    <span style=color:#75715e>-- 添加外键及外键约束
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>CONSTRAINT</span> tester_team <span style=color:#66d9ef>FOREIGN</span> <span style=color:#66d9ef>KEY</span>(team_id) <span style=color:#66d9ef>REFERENCES</span> <span style=color:#a6e22e>tester</span>(id)
);
</code></pre></div><p>修改外键约束</p><p>删除外键约束</p><p>级联删除</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql></code></pre></div><h2 id=多表>多表<a hidden class=anchor aria-hidden=true href=#多表>#</a></h2><blockquote><p>在数据库设计中使用多张表格来实现数据存储的要求，在实际的项目中，数据量大且复杂，需要分库分表。</p></blockquote><p>分表：按照一定的规则，对原有的数据库和表进行拆分，表与表之间可以通过外键建立连接。</p><p>实例：创建一张员工信息表，包含字段：</p><ul><li>eid：员工 ID（自增主键）</li><li>ename：员工姓名</li><li>age：年龄</li><li>gender：性别</li><li>dept_name：部门名称</li><li>dept_id：部门 ID</li><li>dept_manager：部门主管</li><li>dept_location：所在地点</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 创建单表
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>emp</span>(
	eid <span style=color:#66d9ef>INT</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> <span style=color:#66d9ef>AUTO_INCREMENT</span>,
	ename <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>),
	age <span style=color:#66d9ef>INT</span>,
	gender <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>5</span>),
	dept_name <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>10</span>),
	dept_id <span style=color:#66d9ef>INT</span>,
	dept_manager <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>10</span>),
	dept_location <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>10</span>)
);
<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> emp <span style=color:#66d9ef>VALUES</span>(<span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#39;zhangsan&#39;</span>, <span style=color:#ae81ff>20</span>, <span style=color:#e6db74>&#39;&#39;</span>, <span style=color:#e6db74>&#39;qa&#39;</span>, <span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#39;qa_leader&#39;</span>, <span style=color:#e6db74>&#39;beijing&#39;</span>);
</code></pre></div><p>当插入数据时，所有的数据都需要添加部门名称、部门经理等重复性信息，所以需要使用多表设计模式。</p><ul><li>将数据拆分为员工信息表<code>table_emp</code>和部门信息表<code>table_dept</code></li><li>两个表之间通过部门 ID<code>dept_id</code>字段连接</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>table_emp</span>(
	id <span style=color:#66d9ef>INT</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> <span style=color:#66d9ef>AUTO_INCREMENT</span>,
	name <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>),
	age <span style=color:#66d9ef>INT</span>,
	gender <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>5</span>),
	dept_id <span style=color:#66d9ef>INT</span>
);

<span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>table_dept</span>(
	id <span style=color:#66d9ef>INT</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> <span style=color:#66d9ef>AUTO_INCREMENT</span>,
	name <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>10</span>),
	manager <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>10</span>),
	location <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>10</span>)	
);

<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> table_emp <span style=color:#66d9ef>VALUES</span>(<span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#39;zhangsan&#39;</span>, <span style=color:#ae81ff>18</span>, <span style=color:#e6db74>&#39;M&#39;</span>, <span style=color:#ae81ff>1</span>);
<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> table_emp <span style=color:#66d9ef>VALUES</span>(<span style=color:#ae81ff>2</span>, <span style=color:#e6db74>&#39;lisi&#39;</span>, <span style=color:#ae81ff>19</span>, <span style=color:#e6db74>&#39;F&#39;</span>, <span style=color:#ae81ff>2</span>);
<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> table_dept <span style=color:#66d9ef>VALUES</span>(<span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#39;qa&#39;</span>, <span style=color:#e6db74>&#39;leader&#39;</span>, <span style=color:#e6db74>&#39;beijing&#39;</span>);
<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> table_dept <span style=color:#66d9ef>VALUES</span>(<span style=color:#ae81ff>2</span>, <span style=color:#e6db74>&#39;rd&#39;</span>, <span style=color:#e6db74>&#39;rd_leader&#39;</span>, <span style=color:#e6db74>&#39;beijing&#39;</span>);
</code></pre></div><p>多表的优点：</p><ul><li>简化数据</li><li>提高复用性</li><li>方便权限控制</li><li>提高系统的稳定性和负载能力</li></ul><h3 id=多表关系简介>多表关系简介<a hidden class=anchor aria-hidden=true href=#多表关系简介>#</a></h3><h5 id=一对多>一对多<a hidden class=anchor aria-hidden=true href=#一对多>#</a></h5><p>定义：主表的一条记录可以对应从表的多条记录。在一对多关系中，多的表定为从表，设置外键指向主表。</p><p>比如：部门表、员工表，一个部门可以对应多个员工。建表时，员工表就应作为从表，设置外键指向部门表的主键。</p><h5 id=多对多>多对多<a hidden class=anchor aria-hidden=true href=#多对多>#</a></h5><p>定义：主表的多条记录可以对应从表的多条记录。需要创建第三张表作为中间表，中间表需要包含两种表的主键。</p><p>比如：商品信息表、客户表、订单表。</p><h5 id=一对一>一对一<a hidden class=anchor aria-hidden=true href=#一对一>#</a></h5><p>定义：从表的一条记录对应主表的一条记录，这种对应关系的数据，通常放在单表里。</p><p>比如：员工信息表与身份证、联系方式。</p><h3 id=多表查询>多表查询<a hidden class=anchor aria-hidden=true href=#多表查询>#</a></h3><h5 id=笛卡尔积查询>笛卡尔积查询<a hidden class=anchor aria-hidden=true href=#笛卡尔积查询>#</a></h5><p>通过查询多张表格获取数据，至少涉及两张表</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 创建部门表，插入三条数据
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>dept</span>(
	id <span style=color:#66d9ef>INT</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> <span style=color:#66d9ef>AUTO_INCREMENT</span>,
	dept_name <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>),
	dept_manager <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>),
	dept_location <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>)
);

<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> dept <span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#39;研发部&#39;</span>, <span style=color:#e6db74>&#39;研发小张&#39;</span>, <span style=color:#e6db74>&#39;北京&#39;</span>);
<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> dept <span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>2</span>, <span style=color:#e6db74>&#39;运营部&#39;</span>, <span style=color:#e6db74>&#39;运营小李&#39;</span>, <span style=color:#e6db74>&#39;上海&#39;</span>);
<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> dept <span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>3</span>, <span style=color:#e6db74>&#39;销售部&#39;</span>, <span style=color:#e6db74>&#39;销售小王&#39;</span>, <span style=color:#e6db74>&#39;深圳&#39;</span>);

<span style=color:#75715e>-- 创建员工信息表，添加外键约束，允许级联删除，并对三个部门插入对应的员工信息
</span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>worker</span>(
	id <span style=color:#66d9ef>INT</span> <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> <span style=color:#66d9ef>AUTO_INCREMENT</span>,
	name <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>20</span>),
	gender <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>10</span>),
	dept_id <span style=color:#66d9ef>INT</span>,
	salary <span style=color:#66d9ef>INT</span>,
	<span style=color:#75715e>-- 添加外键约束，级联删除
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>CONSTRAINT</span> FK <span style=color:#66d9ef>FOREIGN</span> <span style=color:#66d9ef>KEY</span>(dept_id) <span style=color:#66d9ef>REFERENCES</span> <span style=color:#a6e22e>dept</span>(id) <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>CASCADE</span>
);

<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> worker <span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#39;虞姬&#39;</span>, <span style=color:#e6db74>&#39;女&#39;</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>10000</span>);
<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> worker <span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>2</span>, <span style=color:#e6db74>&#39;项羽&#39;</span>, <span style=color:#e6db74>&#39;男&#39;</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>18000</span>);
<span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> worker <span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>3</span>, <span style=color:#e6db74>&#39;后羿&#39;</span>, <span style=color:#e6db74>&#39;男&#39;</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>28000</span>);


<span style=color:#75715e>-- 查询表
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> dept;
<span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> worker;
<span style=color:#75715e>-- 笛卡尔积查询，会出现很多无效数据
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> dept, worker;
<span style=color:#75715e>-- 正确查询
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> dept, worker <span style=color:#66d9ef>WHERE</span> dept.id<span style=color:#f92672>=</span>worker.dept_id;

<span style=color:#75715e>-- 查询出运营部的部门信息及该部门下的员工信息
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> dept, worker <span style=color:#66d9ef>WHERE</span> dept.id<span style=color:#f92672>=</span>worker.dept_id <span style=color:#66d9ef>AND</span> dept.id<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>;
</code></pre></div><h5 id=内连接查询>内连接查询<a hidden class=anchor aria-hidden=true href=#内连接查询>#</a></h5><p>内连接（INNER JOIN）：使用比较运算符进行表间某（些）列数据的比较操作，并列出这些表中与连接条件相匹配的数据行，组成新的记录。匹配上显示，匹配不上不显示。按语法结构分为：隐式内连接和显式内连接。</p><ul><li><p>隐式内连接：使用 where 条件过滤无用数据，没有出现 inner join 关键字</p></li><li><p>显式内连接：添加 inner join 关键字</p></li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 隐式内连接
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> [<span style=color:#960050;background-color:#1e0010>字段名称</span>] <span style=color:#66d9ef>FROM</span> [<span style=color:#960050;background-color:#1e0010>表名</span>] <span style=color:#66d9ef>WHERE</span> [<span style=color:#960050;background-color:#1e0010>条件</span>];
<span style=color:#75715e>-- 显示内连接
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> [<span style=color:#960050;background-color:#1e0010>字段名称</span>] <span style=color:#66d9ef>FROM</span> [<span style=color:#960050;background-color:#1e0010>主表名</span>] <span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> [<span style=color:#960050;background-color:#1e0010>从表名</span>] <span style=color:#66d9ef>ON</span> [<span style=color:#960050;background-color:#1e0010>条件</span>];

<span style=color:#66d9ef>SELECT</span> worker.id, name, dept_location <span style=color:#66d9ef>FROM</span> worker, dept <span style=color:#66d9ef>WHERE</span> worker.dept_id<span style=color:#f92672>=</span>dept.id <span style=color:#66d9ef>AND</span> dept_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;运营部&#34;</span>;

<span style=color:#66d9ef>SELECT</span> worker.id, name, dept_location <span style=color:#66d9ef>FROM</span> dept <span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> worker <span style=color:#66d9ef>ON</span> dept.id<span style=color:#f92672>=</span>worker.dept_id <span style=color:#66d9ef>AND</span> dept_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;运营部&#34;</span>;
</code></pre></div><h5 id=外连接查询>外连接查询<a hidden class=anchor aria-hidden=true href=#外连接查询>#</a></h5><p>外连接：查询多个表中相关联的行，有时候需要包含没有关联的行中数据，即返回查询结果集合中不仅包含符合连接条件的行，还包括左表（左连接）、右表（右连接）中的所有数据行。</p><ul><li>左外连接（LEFT OUTER JOIN），OUTER 可以省略，以左表为基准匹配右表的数据，确保左表数据都展示，右表中没有的项，显示为空。</li><li>右外连接（RIGHT OUTER JOIN），OUTER 可以省略，以右表为基准匹配左表的数据，确保右表数据都展示，左表中没有的项，显示为空。</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 左连接
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> [<span style=color:#960050;background-color:#1e0010>字段名称</span>] <span style=color:#66d9ef>FROM</span> [<span style=color:#960050;background-color:#1e0010>左表</span>] <span style=color:#66d9ef>LEFT</span> <span style=color:#66d9ef>JOIN</span> [<span style=color:#960050;background-color:#1e0010>右表</span>] <span style=color:#66d9ef>ON</span> [<span style=color:#960050;background-color:#1e0010>条件</span>];

<span style=color:#75715e>-- 右连接
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> [<span style=color:#960050;background-color:#1e0010>字段名称</span>] <span style=color:#66d9ef>FROM</span> [<span style=color:#960050;background-color:#1e0010>左表</span>] <span style=color:#66d9ef>RIGHT</span> <span style=color:#66d9ef>JOIN</span> [<span style=color:#960050;background-color:#1e0010>右表</span>] <span style=color:#66d9ef>ON</span> [<span style=color:#960050;background-color:#1e0010>条件</span>];
</code></pre></div><h5 id=子查询>子查询<a hidden class=anchor aria-hidden=true href=#子查询>#</a></h5><p>子查询指一个查询语句嵌套在另一个查询语句内部，在 SELECT 子句中先计算子查询，子查询的结果作为外层另一个查询的过滤条件，查询可以基于一个表或者多个表。</p><p>子查询作为过滤条件时需要用<strong>小括号</strong>包裹。</p><p>常见的三类子查询如下：</p><p>from 型</p><p>将子查询的结果作为父查询的表来使用。子查询是一张多行多列的表，将子查询作为父查询的表来嵌套查询，子查询必须用小括号包裹且有别名。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 计算出各部门男性员工的人数
</span><span style=color:#75715e>-- 最终查询字段部门名称、男性员工人数
</span><span style=color:#75715e>-- 子查询：查询公司所有性别为男的员工信息
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> worker <span style=color:#66d9ef>WHERE</span> gender<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;男&#34;</span>;

<span style=color:#66d9ef>SELECT</span> 
	dept_name <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>&#39;部门名称&#39;</span>, <span style=color:#a6e22e>COUNT</span>(dept_id) <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>&#39;部门人数&#39;</span> 
<span style=color:#66d9ef>FROM</span> 
	(<span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> worker <span style=color:#66d9ef>WHERE</span> gender<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;男&#34;</span>) <span style=color:#66d9ef>AS</span> male_worker <span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> dept 
<span style=color:#66d9ef>ON</span> 
	male_worker.dept_id<span style=color:#f92672>=</span>dept.id 
<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> 
	dept_name;
</code></pre></div><p>in/not in 型：子查询的结果是单列多行，作为 where 的过滤条件</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 带 IN 关键字的子查询
</span><span style=color:#75715e>-- 查询出北京地区所有的员工信息
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> id <span style=color:#66d9ef>FROM</span> dept <span style=color:#66d9ef>WHERE</span> dept_location<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;北京&#34;</span>;

<span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> worker <span style=color:#66d9ef>WHERE</span> dept_id <span style=color:#66d9ef>IN</span> (<span style=color:#66d9ef>SELECT</span> id <span style=color:#66d9ef>FROM</span> dept <span style=color:#66d9ef>WHERE</span> dept_location<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;北京&#34;</span>);
<span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> worker <span style=color:#66d9ef>WHERE</span> dept_id <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>IN</span> (<span style=color:#66d9ef>SELECT</span> id <span style=color:#66d9ef>FROM</span> dept <span style=color:#66d9ef>WHERE</span> dept_location<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;北京&#34;</span>);
</code></pre></div><p>where 型：查询结果作为过滤条件出现在比较运算符的一端，常用于子查询结果为单个的情况。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- 查询出薪资大于公司平均薪资的员工 ID、姓名、薪资
</span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>AVG</span>(salary) <span style=color:#66d9ef>FROM</span> worker;
<span style=color:#66d9ef>SELECT</span> id, name, salary <span style=color:#66d9ef>FROM</span> worker <span style=color:#66d9ef>WHERE</span> salary <span style=color:#f92672>&gt;</span> (<span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>AVG</span>(salary) <span style=color:#66d9ef>FROM</span> worker);
</code></pre></div><p>with&mldr;as&mldr;型：如果一整句查询语句中，某个子查询的结果会被多个父查询引用，通常建议将公用的子查询用简写表示出来。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#75715e>-- WITH [表名] AS (SELECT ...)
</span><span style=color:#75715e>-- 查询出部门平均薪资大于公司平均薪资的部门名称、部门主管、所在地，及其平均薪资
</span><span style=color:#75715e></span><span style=color:#66d9ef>WITH</span> 
	dept_avg 
<span style=color:#66d9ef>AS</span> 
	(<span style=color:#66d9ef>SELECT</span> dept_id, <span style=color:#a6e22e>AVG</span>(salary) <span style=color:#66d9ef>AS</span> avg_salary <span style=color:#66d9ef>FROM</span> worker <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> dept_id)
<span style=color:#66d9ef>SELECT</span> 
	dept_name, dept_manager, dept_location, avg_salary
<span style=color:#66d9ef>FROM</span>
	dept <span style=color:#66d9ef>INNER</span> <span style=color:#66d9ef>JOIN</span> dept_avg
<span style=color:#66d9ef>ON</span>
	id<span style=color:#f92672>=</span>dept_id
<span style=color:#66d9ef>AND</span>
	avg_salary <span style=color:#f92672>&gt;</span> (<span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>AVG</span>(avg_salary) <span style=color:#66d9ef>FROM</span> dept_avg);

</code></pre></div><h4 id=视图>视图<a hidden class=anchor aria-hidden=true href=#视图>#</a></h4><p>视图是一种虚拟的表，它并不会在存储空间复制一份数据，而是对原有数据的一种引用。可以将视图理解为一种存储起来的 sql 语句。</p><ul><li>视图可以简化多表查询</li><li>视图可以用于控制用户权限</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=color:#66d9ef>CREATE</span> VIEW [<span style=color:#960050;background-color:#1e0010>视图名称</span>] <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>SELECT</span> ...
</code></pre></div></div><div class=post-reward><div style=padding:0;margin:0;width:100%;font-size:16px;text-align:center><div id=QR style=opacity:0><div id=wechat style=display:inline-block><a class=fancybox rel=group><img id=wechat_qr src=https://abeelan.github.io/img/wechatpay.jpg alt=wechat_pay></a><p>微信</p></div><div id=alipay style=display:inline-block><a class=fancybox rel=group><img id=alipay_qr src=https://abeelan.github.io/img/alipay.jpg alt=alipay></a><p>支付宝</p></div></div><button id=rewardButton onclick="var qr=document.getElementById('QR');qr.style.opacity==='0'?qr.style.opacity='1':qr.style.opacity='0'">
<span>🧧 鼓励一下 🧧</span></button></div></div><footer class=post-footer><nav class=paginav><a class=prev href=https://abeelan.github.io/posts/read/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/><span class=title>« 上一页</span><br><span>《计算机网络原理》计算题汇总</span></a>
<a class=next href=https://abeelan.github.io/posts/tech/%E5%85%B6%E4%BB%96/%E5%AD%99%E9%AB%98%E9%A3%9E%E8%AF%9D%E9%A2%98%E6%95%B4%E7%90%86/><span class=title>下一页 »</span><br><span>ycwdaaaa 话题整理</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share MySQL - 常用命令汇总 on twitter" href="https://twitter.com/intent/tweet/?text=MySQL%20-%20%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4%e6%b1%87%e6%80%bb&url=https%3a%2f%2fabeelan.github.io%2fposts%2ftech%2f%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%2fmysql%25E5%25B8%25B8%25E7%2594%25A8%25E5%2591%25BD%25E4%25BB%25A4%25E6%25B1%2587%25E6%2580%25BB%2f&hashtags=mysql"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share MySQL - 常用命令汇总 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fabeelan.github.io%2fposts%2ftech%2f%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%2fmysql%25E5%25B8%25B8%25E7%2594%25A8%25E5%2591%25BD%25E4%25BB%25A4%25E6%25B1%2587%25E6%2580%25BB%2f&title=MySQL%20-%20%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4%e6%b1%87%e6%80%bb&summary=MySQL%20-%20%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4%e6%b1%87%e6%80%bb&source=https%3a%2f%2fabeelan.github.io%2fposts%2ftech%2f%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%2fmysql%25E5%25B8%25B8%25E7%2594%25A8%25E5%2591%25BD%25E4%25BB%25A4%25E6%25B1%2587%25E6%2580%25BB%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share MySQL - 常用命令汇总 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fabeelan.github.io%2fposts%2ftech%2f%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%2fmysql%25E5%25B8%25B8%25E7%2594%25A8%25E5%2591%25BD%25E4%25BB%25A4%25E6%25B1%2587%25E6%2580%25BB%2f&title=MySQL%20-%20%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4%e6%b1%87%e6%80%bb"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share MySQL - 常用命令汇总 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fabeelan.github.io%2fposts%2ftech%2f%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%2fmysql%25E5%25B8%25B8%25E7%2594%25A8%25E5%2591%25BD%25E4%25BB%25A4%25E6%25B1%2587%25E6%2580%25BB%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share MySQL - 常用命令汇总 on whatsapp" href="https://api.whatsapp.com/send?text=MySQL%20-%20%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4%e6%b1%87%e6%80%bb%20-%20https%3a%2f%2fabeelan.github.io%2fposts%2ftech%2f%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%2fmysql%25E5%25B8%25B8%25E7%2594%25A8%25E5%2591%25BD%25E4%25BB%25A4%25E6%25B1%2587%25E6%2580%25BB%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share MySQL - 常用命令汇总 on telegram" href="https://telegram.me/share/url?text=MySQL%20-%20%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4%e6%b1%87%e6%80%bb&url=https%3a%2f%2fabeelan.github.io%2fposts%2ftech%2f%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%2fmysql%25E5%25B8%25B8%25E7%2594%25A8%25E5%2591%25BD%25E4%25BB%25A4%25E6%25B1%2587%25E6%2580%25BB%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></div></article></main><footer class=footer><span>Copyright
&copy;
-2023
<a href=https://abeelan.github.io/ style=color:#939393>ABEE</a>
All Rights Reserved</span>
<a href=https://beian.miit.gov.cn/ target=_blank style=color:#939393></a>&nbsp;
<span><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=null" style=display:inline-block;text-decoration:none;height:20px;color:#939393><img src style="float:left;margin:0 5px 0 0"></a></span>
<span id=busuanzi_container><span class="fa fa-user"></span><span id=busuanzi_value_site_uv></span><span class="fa fa-eye"></span><span id=busuanzi_value_site_pv></span></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg><span id=read_progress></span></span></a><script>document.addEventListener('scroll',function(e){const a=document.getElementById("read_progress"),b=document.documentElement.scrollHeight,c=document.documentElement.clientHeight,d=document.documentElement.scrollTop||document.body.scrollTop;a.innerText=((d/(b-c)).toFixed(2)*100).toFixed(0)})</script><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>let mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>200||document.documentElement.scrollTop>200?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{(function(){document.cookie="change-themes="+escape("false")})(),document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><script>document.body.addEventListener('copy',function(a){if(window.getSelection().toString()&&window.getSelection().toString().length>50){let b=a.clipboardData||window.clipboardData;if(b){a.preventDefault();let c=window.getSelection().toString()+'\r\n\n————————————————\r\n'+'版权声明：本文为「'+"ABEE"+'」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。'+'\r\n原文链接：'+location.href,d=window.getSelection().toString()+'\r\n\n————————————————\r\n'+'版权声明：本文为「'+"ABEE"+'」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。'+'\r\n原文链接：'+location.href;b.setData('text/html',c),b.setData('text/plain',d)}}})</script><script>document.querySelectorAll('pre > code').forEach(c=>{const d=c.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='📄 复制';function i(){a.innerText='👌🏻 已复制!',setTimeout(()=>{a.innerText='📄 复制'},2e3)}a.addEventListener('click',d=>{if('clipboard'in navigator){let a=c.textContent+'\r\n————————————————\r\n'+'版权声明：本文为「'+"ABEE"+'」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。'+'\r\n原文链接：'+location.href;navigator.clipboard.writeText(a),i();return}const a=document.createRange();a.selectNodeContents(c);const b=window.getSelection();b.removeAllRanges(),b.addRange(a);try{document.execCommand('copy'),i()}catch(a){}b.removeRange(a)});let j=c.className.replaceAll("language-",""),b=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div"),e=document.createElement("div");e.innerText=j,b.setAttribute('class','mac-tool'),f.setAttribute('class','mac bb1'),g.setAttribute('class','mac bb2'),h.setAttribute('class','mac bb3'),e.setAttribute('class','language-type'),b.appendChild(f),b.appendChild(g),b.appendChild(h),b.appendChild(e),d.classList.contains("highlight")?(d.appendChild(a),d.appendChild(b)):d.parentNode.firstChild==d||(c.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?(c.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a),d.appendChild(b)):(c.parentNode.appendChild(a),d.appendChild(b)))})</script><script>$("code[class^=language] ").on("mouseover",function(){this.clientWidth<this.scrollWidth&&($(this).css("width","135%"),$(this).css("border-top-right-radius","var(--radius)"))}).on("mouseout",function(){$(this).css("width","100%"),$(this).css("border-top-right-radius","unset")})</script></body></html>